var Dr=ne=>{"use strict";ne.exports={version:"1.0.34"}},$r=(ne,J,x)=>{"use strict";x.r(J),x.d(J,{BrowserCookieAuthStorageAdapter:()=>Pr,CookieAuthStorageAdapter:()=>dr,DEFAULT_COOKIE_OPTIONS:()=>ar,createSupabaseClient:()=>kr,isBrowser:()=>Or,parseCookies:()=>Rr,parseSupabaseCookie:()=>cr,serializeCookie:()=>Ar,stringifySupabaseSession:()=>ur}),new TextEncoder;let M=new TextDecoder,q=l=>{let e=atob(l),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},E=crypto;E.getRandomValues.bind(E),Symbol();let T=l=>{let e=l;e instanceof Uint8Array&&(e=M.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return q(e)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}},y=l=>{let e;return e=l||(typeof fetch>"u"?(...t)=>Promise.resolve().then(x.t.bind(x,6749,23)).then(({default:r})=>r(...t)):fetch),(...t)=>e(...t)},s=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},d=class extends s{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},c=class extends s{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},h=class extends s{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},a=class{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=y(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r,i,o,p,m;return i=this,o=void 0,p=void 0,m=function*(){try{let g,{headers:b,method:P,body:N}=t,j={};N&&(b&&!Object.prototype.hasOwnProperty.call(b,"Content-Type")||!b)&&(typeof Blob<"u"&&N instanceof Blob||N instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",g=N):typeof N=="string"?(j["Content-Type"]="text/plain",g=N):typeof FormData<"u"&&N instanceof FormData?g=N:(j["Content-Type"]="application/json",g=JSON.stringify(N)));let U=yield this.fetch(`${this.url}/${e}`,{method:P||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),b),body:g}).catch(be=>{throw new d(be)}),se=U.headers.get("x-relay-error");if(se&&se==="true")throw new c(U);if(!U.ok)throw new h(U);let ie=((r=U.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim();return{data:ie==="application/json"?yield U.json():ie==="application/octet-stream"?yield U.blob():ie==="multipart/form-data"?yield U.formData():yield U.text(),error:null}}catch(g){return{data:null,error:g}}},new(p||(p=Promise))(function(g,b){function P(U){try{j(m.next(U))}catch(se){b(se)}}function N(U){try{j(m.throw(U))}catch(se){b(se)}}function j(U){var se;U.done?g(U.value):((se=U.value)instanceof p?se:new p(function(ie){ie(se)})).then(P,N)}j((m=m.apply(i,o||[])).next())})}};var n,u,f,v,_,w,O,A,G,ee,de,ve,pe=x(6749),k=x.n(pe);let H=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=k():this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var p,m,g;let b=null,P=null,N=null,j=o.status,U=o.statusText;if(o.ok){if(this.method!=="HEAD"){let je=await o.text();je===""||(P=this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?je:JSON.parse(je))}let ie=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),be=(m=o.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");ie&&be&&be.length>1&&(N=parseInt(be[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(P)&&(P.length>1?(b={code:"PGRST116",details:`Results contain ${P.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},P=null,N=null,j=406,U="Not Acceptable"):P=P.length===1?P[0]:null)}else{let ie=await o.text();try{b=JSON.parse(ie),Array.isArray(b)&&o.status===404&&(P=[],b=null,j=200,U="OK")}catch{o.status===404&&ie===""?(j=204,U="No Content"):b={message:ie}}if(b&&this.isMaybeSingle&&((g=b?.details)===null||g===void 0?void 0:g.includes("0 rows"))&&(b=null,j=200,U="OK"),b&&this.shouldThrowOnError)throw b}return{error:b,data:P,count:N,status:j,statusText:U}});return this.shouldThrowOnError||(i=i.catch(o=>{var p,m,g;return{error:{message:`${(p=o?.name)!==null&&p!==void 0?p:"FetchError"}: ${o?.message}`,details:`${(m=o?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(g=o?.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}},K=class extends H{select(e){let t=!1,r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i}={}){let o=i?`${i}.order`:"order",p=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${p?`${p},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){let r=t===void 0?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){let i=r===void 0?"offset":`${r}.offset`,o=r===void 0?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:p="text"}={}){let m=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),g=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${p}; for="${g}"; options=${m};`,this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}},re=class extends K{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=t.map(i=>typeof i=="string"&&RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let p=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${p}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){let r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},I=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){let i=!1,o=(e??"*").split("").map(p=>/\s/.test(p)&&!i?"":(p==='"'&&(i=!i),p)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new re({method:t?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){let i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){let o=e.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(o.length>0){let p=[...new Set(o)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new re({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){let p=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&p.push(this.headers.Prefer),i&&p.push(`count=${i}`),o||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(e)){let m=e.reduce((g,b)=>g.concat(Object.keys(b)),[]);if(m.length>0){let g=[...new Set(m)].map(b=>`"${b}"`);this.url.searchParams.set("columns",g.join(","))}}return new re({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new re({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new re({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}},$={"X-Client-Info":"postgrest-js/1.8.5"},Z=class pr{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},$),t),this.schemaName=r,this.fetch=i}from(e){let t=new URL(`${this.url}/${e}`);return new I(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new pr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:i}={}){let o,p,m=new URL(`${this.url}/rpc/${e}`);r?(o="HEAD",Object.entries(t).forEach(([b,P])=>{m.searchParams.append(b,`${P}`)})):(o="POST",p=t);let g=Object.assign({},this.headers);return i&&(g.Prefer=`count=${i}`),new re({method:o,url:m,headers:g,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}};var X=x(3545);let le={"X-Client-Info":"realtime-js/2.8.0"};(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(n||(n={})),function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"}(u||(u={})),function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"}(f||(f={})),(v||(v={})).websocket="websocket",function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"}(_||(_={}));let Me=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},tt=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let i=t.getUint8(1),o=t.getUint8(2),p=this.HEADER_LENGTH+2,m=r.decode(e.slice(p,p+i));p+=i;let g=r.decode(e.slice(p,p+o));p+=o;let b=JSON.parse(r.decode(e.slice(p,e.byteLength)));return{ref:null,topic:m,event:g,payload:b}}},Ye=class{constructor(e,t,r={},i=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(w||(w={}));let vt=class Yt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:p,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yt.syncState(this.state,i,o,p),this.pendingDiffs.forEach(g=>{this.state=Yt.syncDiff(this.state,g,o,p)}),this.pendingDiffs=[],m()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:p,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Yt.syncDiff(this.state,i,o,p),m())}),this.onJoin((i,o,p)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:p})}),this.onLeave((i,o,p)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:p})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){let o=this.cloneDeep(e),p=this.transformState(t),m={},g={};return this.map(o,(b,P)=>{p[b]||(g[b]=P)}),this.map(p,(b,P)=>{let N=o[b];if(N){let j=P.map(be=>be.presence_ref),U=N.map(be=>be.presence_ref),se=P.filter(be=>0>U.indexOf(be.presence_ref)),ie=N.filter(be=>0>j.indexOf(be.presence_ref));se.length>0&&(m[b]=se),ie.length>0&&(g[b]=ie)}else m[b]=P}),this.syncDiff(o,{joins:m,leaves:g},r,i)}static syncDiff(e,t,r,i){let{joins:o,leaves:p}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(m,g)=>{var b;let P=(b=e[m])!==null&&b!==void 0?b:[];if(e[m]=this.cloneDeep(g),P.length>0){let N=e[m].map(U=>U.presence_ref),j=P.filter(U=>0>N.indexOf(U.presence_ref));e[m].unshift(...j)}r(m,P,g)}),this.map(p,(m,g)=>{let b=e[m];if(!b)return;let P=g.map(N=>N.presence_ref);b=b.filter(N=>0>P.indexOf(N.presence_ref)),e[m]=b,i(m,b,g),b.length===0&&delete e[m]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,r)=>{let i=e[r];return"metas"in i?t[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(O||(O={}));let rt=(l,e,t={})=>{var r;let i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,p)=>(o[p]=ct(p,l,e,i),o),{})},ct=(l,e,t,r)=>{let i=e.find(m=>m.name===l),o=i?.type,p=t[l];return o&&!r.includes(o)?mt(o,p):Te(p)},mt=(l,e)=>{if(l.charAt(0)==="_"){let t=l.slice(1,l.length);return Tt(e,t)}switch(l){case O.bool:return Et(e);case O.float4:case O.float8:case O.int2:case O.int4:case O.int8:case O.numeric:case O.oid:return we(e);case O.json:case O.jsonb:return at(e);case O.timestamp:return Ot(e);case O.abstime:case O.date:case O.daterange:case O.int4range:case O.int8range:case O.money:case O.reltime:case O.text:case O.time:case O.timestamptz:case O.timetz:case O.tsrange:case O.tstzrange:default:return Te(e)}},Te=l=>l,Et=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},we=l=>{if(typeof l=="string"){let e=parseFloat(l);if(!Number.isNaN(e))return e}return l},at=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(e){console.log(`JSON parse error: ${e}`)}return l},Tt=(l,e)=>{if(typeof l!="string")return l;let t=l.length-1,r=l[t];if(l[0]==="{"&&r==="}"){let o,p=l.slice(1,t);try{o=JSON.parse("["+p+"]")}catch{o=p?p.split(","):[]}return o.map(m=>mt(e,m))}return l},Ot=l=>typeof l=="string"?l.replace(" ","T"):l;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(A||(A={})),function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes"}(G||(G={})),function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"}(ee||(ee={}));let Lt=class fr{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=u.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ye(this,f.join,this.params,this.timeout),this.rejoinTimer=new Me(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=u.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=u.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=u.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=u.errored,this.rejoinTimer.scheduleTimeout())}),this._on(f.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new vt(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:o,presence:p}}=this.params;this._onError(b=>e&&e("CHANNEL_ERROR",b)),this._onClose(()=>e&&e("CLOSED"));let m={},g={broadcast:o,presence:p,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(b=>b.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(m.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:g},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:b})=>{var P;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),b===void 0){e&&e("SUBSCRIBED");return}{let N=this.bindings.postgres_changes,j=(P=N?.length)!==null&&P!==void 0?P:0,U=[];for(let se=0;se<j;se++){let ie=N[se],{filter:{event:be,schema:je,table:et,filter:nt}}=ie,Xe=b&&b[se];if(Xe&&Xe.event===be&&Xe.schema===je&&Xe.table===et&&Xe.filter===nt)U.push(Object.assign(Object.assign({},ie),{id:Xe.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,e&&e("SUBSCRIBED");return}}).receive("error",b=>{e&&e("CHANNEL_ERROR",Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(this._canPush()||e.type!=="broadcast")return new Promise(o=>{var p,m,g;let b=this._push(e.type,e,t.timeout||this.timeout);b.rateLimited&&o("rate limited"),e.type!=="broadcast"||((g=(m=(p=this.params)===null||p===void 0?void 0:p.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0?void 0:g.ack)||o("ok"),b.receive("ok",()=>o("ok")),b.receive("timeout",()=>o("timed out"))});{let{event:o,payload:p}=e,m={method:"POST",headers:{apikey:(r=this.socket.accessToken)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:p}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=t.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=u.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(f.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let i=new Ye(this,f.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return(e=(e=e.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),p=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(o),p}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ye(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,o;let p=e.toLocaleLowerCase(),{close:m,error:g,leave:b,join:P}=f;if(r&&[m,g,b,P].indexOf(p)>=0&&r!==this._joinRef())return;let N=this._onMessage(p,t,r);if(t&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(p)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(j=>{var U,se,ie;return((U=j.filter)===null||U===void 0?void 0:U.event)==="*"||((ie=(se=j.filter)===null||se===void 0?void 0:se.event)===null||ie===void 0?void 0:ie.toLocaleLowerCase())===p}).map(j=>j.callback(N,r)):(o=this.bindings[p])===null||o===void 0||o.filter(j=>{var U,se,ie,be,je,et;if(!["broadcast","presence","postgres_changes"].includes(p))return j.type.toLocaleLowerCase()===p;if("id"in j){let nt=j.id,Xe=(U=j.filter)===null||U===void 0?void 0:U.event;return nt&&((se=t.ids)===null||se===void 0?void 0:se.includes(nt))&&(Xe==="*"||Xe?.toLocaleLowerCase()===((ie=t.data)===null||ie===void 0?void 0:ie.type.toLocaleLowerCase()))}{let nt=(je=(be=j?.filter)===null||be===void 0?void 0:be.event)===null||je===void 0?void 0:je.toLocaleLowerCase();return nt==="*"||nt===((et=t?.event)===null||et===void 0?void 0:et.toLocaleLowerCase())}}).map(j=>{if(typeof N=="object"&&"ids"in N){let U=N.data,{schema:se,table:ie,commit_timestamp:be,type:je,errors:et}=U;N=Object.assign(Object.assign({},{schema:se,table:ie,commit_timestamp:be,eventType:je,new:{},old:{},errors:et}),this._getPayloadRecords(U))}j.callback(N,r)})}_isClosed(){return this.state===u.closed}_isJoined(){return this.state===u.joined}_isJoining(){return this.state===u.joining}_isLeaving(){return this.state===u.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let i=e.toLocaleLowerCase(),o={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&fr.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(f.close,{},e)}_onError(e){this._on(f.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=u.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=rt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=rt(e.columns,e.old_record)),t}},Pt=()=>{},St=class{constructor(e,t){var r,i;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=le,this.params={},this.timeout=1e4,this.transport=X.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Pt,this.conn=null,this.sendBuffer=[],this.serializer=new tt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this._resolveFetch=m=>{let g;return g=m||(typeof fetch>"u"?(...b)=>Promise.resolve().then(x.t.bind(x,6749,23)).then(({default:P})=>P(...b)):fetch),(...b)=>g(...b)},this.endPoint=`${e}/${v.websocket}`,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),t?.transport&&(this.transport=t.transport),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let o=(r=t?.params)===null||r===void 0?void 0:r.eventsPerSecond;o&&(this.eventsPerSecondLimitMs=Math.floor(1e3/o));let p=(i=t?.params)===null||i===void 0?void 0:i.apikey;p&&(this.accessToken=p),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:m=>[1e3,2e3,5e3,1e4][m-1]||1e4,this.encode=t?.encode?t.encode:(m,g)=>g(JSON.stringify(m)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Me(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch)}connect(){!this.conn&&(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case n.connecting:return _.Connecting;case n.open:return _.Open;case n.closing:return _.Closing;default:return _.Closed}}isConnected(){return this.connectionState()===_.Open}channel(e,t={config:{}}){let r=new Lt(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){let{topic:t,event:r,payload:i,ref:o}=e,p=()=>{this.encode(e,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};if(this.log("push",`${t} ${r} (${o})`,i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(p)())return"rate limited"}else p();else this.sendBuffer.push(p)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(f.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:o,ref:p}=t;(p&&p===this.pendingHeartbeatRef||i===o?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${p&&"("+p+")"||""}`,o),this.channels.filter(m=>m._isMember(r)).forEach(m=>m._trigger(i,o,p)),this.stateChangeCallbacks.message.forEach(m=>m(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(f.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(1e3,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>!!this.inThrottle||(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}},yt=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Ue(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}let Dt=class extends yt{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},kt=class extends yt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}},xt=l=>{let e;return e=l||(typeof fetch>"u"?(...t)=>Promise.resolve().then(x.t.bind(x,6749,23)).then(({default:r})=>r(...t)):fetch),(...t)=>e(...t)},Rt=()=>function(l,e,t,r){return new(t||(t=Promise))(function(i,o){function p(b){try{g(r.next(b))}catch(P){o(P)}}function m(b){try{g(r.throw(b))}catch(P){o(P)}}function g(b){var P;b.done?i(b.value):((P=b.value)instanceof t?P:new t(function(N){N(P)})).then(p,m)}g((r=r.apply(l,e||[])).next())})}(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(x.t.bind(x,6749,23))).Response:Response});var ut=function(l,e,t,r){return new(t||(t=Promise))(function(i,o){function p(b){try{g(r.next(b))}catch(P){o(P)}}function m(b){try{g(r.throw(b))}catch(P){o(P)}}function g(b){var P;b.done?i(b.value):((P=b.value)instanceof t?P:new t(function(N){N(P)})).then(p,m)}g((r=r.apply(l,e||[])).next())})};let Ct=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),V=(l,e)=>ut(void 0,void 0,void 0,function*(){let t=yield Rt();l instanceof t?l.json().then(r=>{e(new Dt(Ct(r),l.status||500))}).catch(r=>{e(new kt(Ct(r),r))}):e(new kt(Ct(l),l))}),S=(l,e,t,r)=>{let i={method:l,headers:e?.headers||{}};return l==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function C(l,e,t,r,i,o){return ut(this,void 0,void 0,function*(){return new Promise((p,m)=>{l(t,S(e,r,i,o)).then(g=>{if(!g.ok)throw g;return r?.noResolveJson?g:g.json()}).then(g=>p(g)).catch(g=>V(g,m))})})}function F(l,e,t,r){return ut(this,void 0,void 0,function*(){return C(l,"GET",e,t,r)})}function D(l,e,t,r,i){return ut(this,void 0,void 0,function*(){return C(l,"POST",e,r,i,t)})}function te(l,e,t,r,i){return ut(this,void 0,void 0,function*(){return C(l,"DELETE",e,r,i,t)})}var me=function(l,e,t,r){return new(t||(t=Promise))(function(i,o){function p(b){try{g(r.next(b))}catch(P){o(P)}}function m(b){try{g(r.throw(b))}catch(P){o(P)}}function g(b){var P;b.done?i(b.value):((P=b.value)instanceof t?P:new t(function(N){N(P)})).then(p,m)}g((r=r.apply(l,e||[])).next())})};let ye={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},W={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},ge=class{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=xt(i)}uploadOrUpdate(e,t,r,i){return me(this,void 0,void 0,function*(){try{let o,p=Object.assign(Object.assign({},W),i),m=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?((o=new FormData).append("cacheControl",p.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r).append("cacheControl",p.cacheControl):(o=r,m["cache-control"]=`max-age=${p.cacheControl}`,m["content-type"]=p.contentType);let g=this._removeEmptyFolders(t),b=this._getFinalPath(g),P=yield this.fetch(`${this.url}/object/${b}`,Object.assign({method:e,body:o,headers:m},p?.duplex?{duplex:p.duplex}:{}));return P.ok?{data:{path:g},error:null}:{data:null,error:yield P.json()}}catch(o){if(Ue(o))return{data:null,error:o};throw o}})}upload(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return me(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(e),p=this._getFinalPath(o),m=new URL(this.url+`/object/upload/sign/${p}`);m.searchParams.set("token",t);try{let g,b=Object.assign({upsert:W.upsert},i),P=Object.assign(Object.assign({},this.headers),{"x-upsert":String(b.upsert)});typeof Blob<"u"&&r instanceof Blob?((g=new FormData).append("cacheControl",b.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r).append("cacheControl",b.cacheControl):(g=r,P["cache-control"]=`max-age=${b.cacheControl}`,P["content-type"]=b.contentType);let N=yield this.fetch(m.toString(),{method:"PUT",body:g,headers:P});return N.ok?{data:{path:o},error:null}:{data:null,error:yield N.json()}}catch(g){if(Ue(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e){return me(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e),r=yield D(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),i=new URL(this.url+r.url),o=i.searchParams.get("token");if(!o)throw new yt("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}update(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return me(this,void 0,void 0,function*(){try{return{data:yield D(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}copy(e,t){return me(this,void 0,void 0,function*(){try{return{data:{path:(yield D(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return me(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield D(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),p=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o={signedUrl:encodeURI(`${this.url}${o.signedURL}${p}`)},error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return me(this,void 0,void 0,function*(){try{let i=yield D(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(p=>Object.assign(Object.assign({},p),{signedUrl:p.signedURL?encodeURI(`${this.url}${p.signedURL}${o}`):null})),error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}download(e,t){return me(this,void 0,void 0,function*(){let r=t?.transform!==void 0,i=this.transformOptsToQueryString(t?.transform||{}),o=i?`?${i}`:"";try{let p=this._getFinalPath(e);return{data:yield(yield F(this.fetch,`${this.url}/${r?"render/image/authenticated":"object"}/${p}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(Ue(p))return{data:null,error:p};throw p}})}getPublicUrl(e,t){let r=this._getFinalPath(e),i=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);let p=t?.transform!==void 0,m=this.transformOptsToQueryString(t?.transform||{});m!==""&&i.push(m);let g=i.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${p?"render/image":"object"}/public/${r}${g}`)}}}remove(e){return me(this,void 0,void 0,function*(){try{return{data:yield te(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}list(e,t,r){return me(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},ye),t),{prefix:e||""});return{data:yield D(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}},he={"X-Client-Info":"storage-js/2.5.4"};var Se=function(l,e,t,r){return new(t||(t=Promise))(function(i,o){function p(b){try{g(r.next(b))}catch(P){o(P)}}function m(b){try{g(r.throw(b))}catch(P){o(P)}}function g(b){var P;b.done?i(b.value):((P=b.value)instanceof t?P:new t(function(N){N(P)})).then(p,m)}g((r=r.apply(l,e||[])).next())})};let xe=class{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},he),t),this.fetch=xt(r)}listBuckets(){return Se(this,void 0,void 0,function*(){try{return{data:yield F(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ue(e))return{data:null,error:e};throw e}})}getBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield F(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Se(this,void 0,void 0,function*(){try{return{data:yield D(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Se(this,void 0,void 0,function*(){try{return{data:yield function(i,o,p,m,g){return ut(this,void 0,void 0,function*(){return C(i,"PUT",o,m,void 0,p)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield D(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield te(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}},De=class extends xe{constructor(e,t={},r){super(e,t,r)}from(e){return new ge(this.url,this.headers,e,this.fetch)}},ze="";ze=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&navigator.product==="ReactNative"?"react-native":"node";let ot={"X-Client-Info":`supabase-js-${ze}/2.38.1`},Qe=l=>{let e;return e=l||(typeof fetch>"u"?k():fetch),(...t)=>e(...t)},st=()=>typeof Headers>"u"?pe.Headers:Headers,dt=(l,e,t)=>{let r=Qe(t),i=st();return(o,p)=>function(m,g,b,P){return new(b||(b=Promise))(function(N,j){function U(be){try{ie(P.next(be))}catch(je){j(je)}}function se(be){try{ie(P.throw(be))}catch(je){j(je)}}function ie(be){var je;be.done?N(be.value):((je=be.value)instanceof b?je:new b(function(et){et(je)})).then(U,se)}ie((P=P.apply(m,g||[])).next())})}(void 0,void 0,void 0,function*(){var m;let g=(m=yield e())!==null&&m!==void 0?m:l,b=new i(p?.headers);return b.has("apikey")||b.set("apikey",l),b.has("Authorization")||b.set("Authorization",`Bearer ${g}`),r(o,Object.assign(Object.assign({},p),{headers:b}))})},ce=()=>typeof document<"u",Re={tested:!1,writable:!1},R=()=>{if(!ce())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Re.tested)return Re.writable;let l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),Re.tested=!0,Re.writable=!0}catch{Re.tested=!0,Re.writable=!1}return Re.writable};function B(l){let e={},t=new URL(l);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}let Y=l=>{let e;return e=l||(typeof fetch>"u"?(...t)=>Promise.resolve().then(x.t.bind(x,6749,23)).then(({default:r})=>r(...t)):fetch),(...t)=>e(...t)},fe=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",ae=async(l,e,t)=>{await l.setItem(e,JSON.stringify(t))},oe=async(l,e)=>{let t=await l.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ue=async(l,e)=>{await l.removeItem(e)},Ce=class gr{constructor(){this.promise=new gr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};function Fe(l){let e=l.split(".");if(e.length!==3)throw Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(e[1]))throw Error("JWT is not valid: payload is not in base64url format");let t=e[1];return JSON.parse(function(r){let i,o,p,m,g,b,P,N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j="",U=0;for(r=r.replace("-","+").replace("_","/");U<r.length;)m=N.indexOf(r.charAt(U++)),g=N.indexOf(r.charAt(U++)),b=N.indexOf(r.charAt(U++)),P=N.indexOf(r.charAt(U++)),i=m<<2|g>>4,o=(15&g)<<4|b>>2,p=(3&b)<<6|P,j+=String.fromCharCode(i),b!=64&&o!=0&&(j+=String.fromCharCode(o)),P!=64&&p!=0&&(j+=String.fromCharCode(p));return j}(t))}async function Be(l){return await new Promise(e=>{setTimeout(()=>e(null),l)})}function Ge(l){return("0"+l.toString(16)).substr(-2)}function Oe(){let l=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,r="";for(let i=0;i<56;i++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(l),Array.from(l,Ge).join("")}async function Le(l){let e=new TextEncoder,t=e.encode(l),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function $e(l){if(!(typeof crypto<"u"&&crypto.subtle!==void 0&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;let t=await Le(l);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}Ce.promiseConstructor=Promise;let Je=class extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}};function z(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}let gt=class extends Je{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},pt=class extends Je{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},ke=class extends Je{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Q=class extends ke{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}},Ae=class extends ke{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}},qe=class extends ke{constructor(e){super(e,"AuthInvalidCredentialsError",400)}},He=class extends ke{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ze=class extends ke{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},At=class extends ke{constructor(e,t){super(e,"AuthRetryableFetchError",t)}};function $t(l){return z(l)&&l.name==="AuthRetryableFetchError"}var Gt=function(l,e){var t={};for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&0>e.indexOf(r)&&(t[r]=l[r]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(l);i<r.length;i++)0>e.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(l,r[i])&&(t[r[i]]=l[r[i]]);return t};let bt=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),_t=[502,503,504];async function Ut(l){let e;if(!fe(l))throw new At(bt(l),0);if(_t.includes(l.status))throw new At(bt(l),l.status);try{e=await l.json()}catch(t){throw new pt(bt(t),t)}throw new gt(bt(e),l.status||500)}let Ie=(l,e,t,r)=>{let i={method:l,headers:e?.headers||{}};return l==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function L(l,e,t,r){var i;let o=Object.assign({},r?.headers);r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let p=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(p.redirect_to=r.redirectTo);let m=Object.keys(p).length?"?"+new URLSearchParams(p).toString():"",g=await It(l,e,t+m,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(g):{data:Object.assign({},g),error:null}}async function It(l,e,t,r,i,o){let p,m=Ie(e,r,i,o);try{p=await l(t,m)}catch(g){throw console.error(g),new At(bt(g),0)}if(p.ok||await Ut(p),r?.noResolveJson)return p;try{return await p.json()}catch(g){await Ut(g)}}function it(l){var e;let t=null;l.access_token&&l.refresh_token&&l.expires_in&&(t=Object.assign({},l),l.expires_at||(t.expires_at=function(i){return Math.round(Date.now()/1e3)+i}(l.expires_in)));let r=(e=l.user)!==null&&e!==void 0?e:l;return{data:{session:t,user:r},error:null}}function lt(l){var e;return{data:{user:(e=l.user)!==null&&e!==void 0?e:l},error:null}}function ht(l){return{data:l,error:null}}function Nt(l){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o}=l,p=Gt(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m=Object.assign({},p);return{data:{properties:{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o},user:m},error:null}}function Qt(l){return l}var Zt=function(l,e){var t={};for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&0>e.indexOf(r)&&(t[r]=l[r]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(l);i<r.length;i++)0>e.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(l,r[i])&&(t[r[i]]=l[r[i]]);return t};let er=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Y(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:lt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{let{options:t}=e,r=Zt(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Nt,redirectTo:t?.redirectTo})}catch(t){if(z(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:lt})}catch(t){if(z(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,o,p,m,g;try{let b={nextPage:null,lastPage:0,total:0},P=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Qt});if(P.error)throw P.error;let N=await P.json(),j=(p=P.headers.get("x-total-count"))!==null&&p!==void 0?p:0,U=(g=(m=P.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return U.length>0&&(U.forEach(se=>{let ie=parseInt(se.split(";")[0].split("=")[1].substring(0,1)),be=JSON.parse(se.split(";")[1].split("=")[1]);b[`${be}Page`]=ie}),b.total=parseInt(j)),{data:Object.assign(Object.assign({},N),b),error:null}}catch(b){if(z(b))return{data:{users:[]},error:b};throw b}}async getUserById(e){try{return await L(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:lt})}catch(t){if(z(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:lt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:lt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{let{data:t,error:r}=await L(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(z(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(z(t))return{data:null,error:t};throw t}}},Jt="2.55.0",tr={"X-Client-Info":`gotrue-js/${Jt}`},rr={getItem:l=>R()?globalThis.localStorage.getItem(l):null,setItem:(l,e)=>{R()&&globalThis.localStorage.setItem(l,e)},removeItem:l=>{R()&&globalThis.localStorage.removeItem(l)}};function Vt(l={}){return{getItem:e=>l[e]||null,setItem:(e,t)=>{l[e]=t},removeItem:e=>{delete l[e]}}}globalThis&&R()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");let ft=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}};(function(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}})();let We={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tr,flowType:"implicit",debug:!1};async function jt(l,e,t){return await t()}let Bt=class or{constructor(e){var t;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=or.nextInstanceID,or.nextInstanceID+=1,this.instanceID>0&&ce()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let r=Object.assign(Object.assign({},We),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new er({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Y(r.fetch),this.lock=r.lock||jt,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:R()?this.storage=rr:(this.memoryStorage={},this.storage=Vt(this.memoryStorage)):(this.memoryStorage={},this.storage=Vt(this.memoryStorage)),ce()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Jt}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){try{let e=!!ce()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:t,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),await this._removeSession(),{error:r};let{session:i,redirectType:o}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return z(e)?{error:e}:{error:new pt("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,r,i;try{let o;if(await this._removeSession(),"email"in e){let{email:P,password:N,options:j}=e,U=null,se=null;if(this.flowType==="pkce"){let ie=Oe();await ae(this.storage,`${this.storageKey}-code-verifier`,ie),U=await $e(ie),se=ie===U?"plain":"s256"}o=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j?.emailRedirectTo,body:{email:P,password:N,data:(t=j?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:j?.captchaToken},code_challenge:U,code_challenge_method:se},xform:it})}else if("phone"in e){let{phone:P,password:N,options:j}=e;o=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:P,password:N,data:(r=j?.data)!==null&&r!==void 0?r:{},channel:(i=j?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:j?.captchaToken}},xform:it})}else throw new qe("You must provide either an email or phone number and a password");let{data:p,error:m}=o;if(m||!p)return{data:{user:null,session:null},error:m};let g=p.session,b=p.user;return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:b,session:g},error:null}}catch(o){if(z(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){let{email:o,password:p,options:m}=e;t=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:p,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:it})}else if("phone"in e){let{phone:o,password:p,options:m}=e;t=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:p,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:it})}else throw new qe("You must provide either an email or phone number and a password");let{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ae}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:i})}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,o;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){let t=await oe(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:i}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:it});return await ue(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:i}):{data:{user:null,session:null},error:new Ae}}async signInWithIdToken(e){await this._removeSession();try{let{options:t,provider:r,token:i,access_token:o,nonce:p}=e,m=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:p,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:it}),{data:g,error:b}=m;return b?{data:{user:null,session:null},error:b}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Ae}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:b})}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,o,p;try{if(await this._removeSession(),"email"in e){let{email:m,options:g}=e,b=null,P=null;if(this.flowType==="pkce"){let j=Oe();await ae(this.storage,`${this.storageKey}-code-verifier`,j),b=await $e(j),P=j===b?"plain":"s256"}let{error:N}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(t=g?.data)!==null&&t!==void 0?t:{},create_user:(r=g?.shouldCreateUser)===null||r===void 0||r,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:b,code_challenge_method:P},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:N}}if("phone"in e){let{phone:m,options:g}=e,{data:b,error:P}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(i=g?.data)!==null&&i!==void 0?i:{},create_user:(o=g?.shouldCreateUser)===null||o===void 0||o,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(p=g?.channel)!==null&&p!==void 0?p:"sms"}});return{data:{user:null,session:null,messageId:b?.message_id},error:P}}throw new qe("You must provide either an email or phone number.")}catch(m){if(z(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(e){var t,r;try{let i,o;e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession(),"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);let{data:p,error:m}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:it});if(m)throw m;if(!p)throw Error("An error occurred on token verification.");let g=p.session,b=p.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:b,session:g},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{return await this._removeSession(),await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:ht})}catch(o){if(z(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Q;let{error:i}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(z(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();let t=`${this.url}/resend`;if("email"in e){let{email:r,type:i,options:o}=e,{error:p}=await L(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){let{phone:r,type:i,options:o}=e,{data:p,error:m}=await L(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:p?.message_id},error:m}}throw new qe("You must provide either an email or phone number and a type")}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){let i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let e=null,t=await oe(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let r=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r)return{data:{session:e},error:null};let{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:lt}):await this._useSession(async t=>{var r,i;let{data:o,error:p}=t;if(p)throw p;return await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:lt})})}catch(t){if(z(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Q;let p=i.session,m=null,g=null;if(this.flowType==="pkce"&&e.email!=null){let N=Oe();await ae(this.storage,`${this.storageKey}-code-verifier`,N),m=await $e(N),g=N===m?"plain":"s256"}let{data:b,error:P}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:m,code_challenge_method:g}),jwt:p.access_token,xform:lt});if(P)throw P;return p.user=b.user,await this._saveSession(p),await this._notifyAllSubscribers("USER_UPDATED",p),{data:{user:p.user},error:null}})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Fe(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Q;let t=Date.now()/1e3,r=t,i=!0,o=null,p=Fe(e.access_token);if(p.exp&&(i=(r=p.exp)<=t),i){let{session:m,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!m)return{data:{user:null,session:null},error:null};o=m}else{let{data:m,error:g}=await this._getUser(e.access_token);if(g)throw g;o={access_token:e.access_token,refresh_token:e.refresh_token,user:m.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(z(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:p,error:m}=t;if(m)throw m;e=(r=p.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Q;let{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!ce())throw new He("No browser detected.");if(this.flowType!=="implicit"||this._isImplicitGrantFlow()){if(this.flowType=="pkce"&&!e)throw new Ze("Not a valid PKCE flow url.")}else throw new He("Not a valid implicit grant flow url.");let t=B(window.location.href);if(e){if(!t.code)throw new Ze("No code detected.");let{data:et,error:nt}=await this._exchangeCodeForSession(t.code);if(nt)throw nt;let Xe=new URL(window.location.href);return Xe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Xe.toString()),{data:{session:et.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new He(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});let{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:p,expires_in:m,expires_at:g,token_type:b}=t;if(!o||!m||!p||!b)throw new He("No session defined in URL");let P=Math.round(Date.now()/1e3),N=parseInt(m),j=P+N;g&&(j=parseInt(g));let U=j-P;1e3*U<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${U}s, should have been closer to ${N}s`);let se=j-N;P-se>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",se,j,P):P-se<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",se,j,P);let{data:ie,error:be}=await this._getUser(o);if(be)throw be;let je={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:N,expires_at:j,refresh_token:p,token_type:b,user:ie.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:je,redirectType:t.type},error:null}}catch(t){if(z(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){let e=B(window.location.href);return!!(ce()&&(e.access_token||e.error_description))}async _isPKCEFlow(){let e=B(window.location.href),t=await oe(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:i,error:o}=t;if(o)return{error:o};let p=(r=i.session)===null||r===void 0?void 0:r.access_token;if(p){let{error:m}=await this.admin.signOut(p,e);if(m&&!(z(m)&&m.name==="AuthApiError"&&(m.status===404||m.status===401)))return{error:m}}return e!=="others"&&(await this._removeSession(),await ue(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){let t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){let o=16*Math.random()|0;return(i=="x"?o:3&o|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{let{data:{session:o},error:p}=t;if(p)throw p;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;if(this.flowType==="pkce"){let o=Oe();await ae(this.storage,`${this.storageKey}-code-verifier`,o),r=await $e(o),i=o===r?"plain":"s256"}try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(z(o))return{data:null,error:o};throw o}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{let r=Date.now();return await function(i,o){return new Promise((m,g)=>{(async()=>{for(let b=0;b<1/0;b++)try{let P=await i(b);if(!o(b,null,P)){m(P);return}}catch(P){if(!o(b,P)){g(P);return}}})()})}(async i=>(await Be(200*i),this._debug(t,"refreshing attempt",i),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:it})),(i,o,p)=>p&&p.error&&$t(p.error)&&Date.now()+(i+1)*200-r<3e4)}catch(r){if(this._debug(t,"error",r),z(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ce()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;let t="#_recoverAndRefresh()";this._debug(t,"begin");try{let r=await oe(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}let i=Math.round(Date.now()/1e3),o=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+10;if(this._debug(t,`session has${o?"":" not"} expired with margin of 10s`),o){if(this.autoRefreshToken&&r.refresh_token){let{error:p}=await this._callRefreshToken(r.refresh_token);p&&(console.error(p),$t(p)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",p),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Q;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ce;let{data:o,error:p}=await this._refreshAccessToken(e);if(p)throw p;if(!o.session)throw new Q;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let m={session:o.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(o){if(this._debug(i,"error",o),z(o)){let p={session:null,error:o};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(p),p}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){let i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let o=[],p=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(e,t)}catch(g){o.push(g)}});if(await Promise.all(p),o.length>0){for(let m=0;m<o.length;m+=1)console.error(o[m]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),ae(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ue(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ce()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((1e3*r.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),i<=3&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ft)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ce()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){let r=[`provider=${encodeURIComponent(e)}`];if(t?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t?.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){let i=Oe();await ae(this.storage,`${this.storageKey}-code-verifier`,i);let o=await $e(i),p=i===o?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",o,"method",p);let m=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(p)}`});r.push(m.toString())}if(t?.queryParams){let i=new URLSearchParams(t.queryParams);r.push(i.toString())}return`${this.url}/authorize?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:i,error:o}=t;return o?{data:null,error:o}:await L(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(z(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;let{data:o,error:p}=t;if(p)return{data:null,error:p};let{data:m,error:g}=await L(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return g?{data:null,error:g}:(!((i=m?.totp)===null||i===void 0)&&i.qr_code&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(t){if(z(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:i,error:o}=t;if(o)return{data:null,error:o};let{data:p,error:m}=await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),{data:p,error:m})})}catch(t){if(z(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:i,error:o}=t;return o?{data:null,error:o}:await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(z(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){let{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};let r=e?.factors||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;let{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let p=this._decodeJWT(i.access_token),m=null;p.aal&&(m=p.aal);let g=m;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(N=>N.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(g="aal2");let P=p.amr||[];return{data:{currentLevel:m,nextLevel:g,currentAuthenticationMethods:P},error:null}}))}};Bt.nextInstanceID=0;let sr=class extends Bt{constructor(e){super(e)}},ir={headers:ot},zt={schema:"public"},Kt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mt={},nr=class{constructor(e,t,r){var i,o,p,m,g,b,P,N;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw Error("supabaseUrl is required.");if(!t)throw Error("supabaseKey is required.");let j=e.replace(/\/$/,"");this.realtimeUrl=`${j}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${j}/auth/v1`,this.storageUrl=`${j}/storage/v1`,this.functionsUrl=`${j}/functions/v1`;let U=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,se={db:zt,realtime:Mt,auth:Object.assign(Object.assign({},Kt),{storageKey:U}),global:ir},ie=function(be,je){let{db:et,auth:nt,realtime:Xe,global:Ir}=be,{db:Nr,auth:jr,realtime:Mr,global:Lr}=je;return{db:Object.assign(Object.assign({},Nr),et),auth:Object.assign(Object.assign({},jr),nt),realtime:Object.assign(Object.assign({},Mr),Xe),global:Object.assign(Object.assign({},Lr),Ir)}}(r??{},se);this.storageKey=(o=(i=ie.auth)===null||i===void 0?void 0:i.storageKey)!==null&&o!==void 0?o:"",this.headers=(m=(p=ie.global)===null||p===void 0?void 0:p.headers)!==null&&m!==void 0?m:{},this.auth=this._initSupabaseAuthClient((g=ie.auth)!==null&&g!==void 0?g:{},this.headers,(b=ie.global)===null||b===void 0?void 0:b.fetch),this.fetch=dt(t,this._getAccessToken.bind(this),(P=ie.global)===null||P===void 0?void 0:P.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},ie.realtime)),this.rest=new Z(`${j}/rest/v1`,{headers:this.headers,schema:(N=ie.db)===null||N===void 0?void 0:N.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new a(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new De(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t,r,i,o,p;return r=this,i=void 0,o=void 0,p=function*(){let{data:m}=yield this.auth.getSession();return(t=(e=m.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null},new(o||(o=Promise))(function(m,g){function b(j){try{N(p.next(j))}catch(U){g(U)}}function P(j){try{N(p.throw(j))}catch(U){g(U)}}function N(j){var U;j.done?m(j.value):((U=j.value)instanceof o?U:new o(function(se){se(U)})).then(b,P)}N((p=p.apply(r,i||[])).next())})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:o,flowType:p,debug:m},g,b){let P={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sr({url:this.authUrl,headers:Object.assign(Object.assign({},P),g),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:p,debug:m,fetch:b})}_initRealtimeClient(e){return new St(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},Xt=(l,e,t)=>new nr(l,e,t);var Ht=Object.create,Ee=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor,Pe=Object.getOwnPropertyNames,Ne=Object.getPrototypeOf,_e=Object.prototype.hasOwnProperty,Ke=(l,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Pe(e))_e.call(l,i)||i===t||Ee(l,i,{get:()=>e[i],enumerable:!(r=Ve(e,i))||r.enumerable});return l},wt=(l,e,t)=>(t=l!=null?Ht(Ne(l)):{},Ke(!e&&l&&l.__esModule?t:Ee(t,"default",{value:l,enumerable:!0}),l)),Wt=(de={"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(l){l.parse=function(o,p){if(typeof o!="string")throw TypeError("argument str must be a string");for(var m={},g=(p||{}).decode||r,b=0;b<o.length;){var P=o.indexOf("=",b);if(P===-1)break;var N=o.indexOf(";",b);if(N===-1)N=o.length;else if(N<P){b=o.lastIndexOf(";",P-1)+1;continue}var j=o.slice(b,P).trim();if(m[j]===void 0){var U=o.slice(P+1,N).trim();U.charCodeAt(0)===34&&(U=U.slice(1,-1)),m[j]=function(se,ie){try{return ie(se)}catch{return se}}(U,g)}b=N+1}return m},l.serialize=function(o,p,m){var g=m||{},b=g.encode||i;if(typeof b!="function")throw TypeError("option encode is invalid");if(!t.test(o))throw TypeError("argument name is invalid");var P=b(p);if(P&&!t.test(P))throw TypeError("argument val is invalid");var N=o+"="+P;if(g.maxAge!=null){var j=g.maxAge-0;if(isNaN(j)||!isFinite(j))throw TypeError("option maxAge is invalid");N+="; Max-Age="+Math.floor(j)}if(g.domain){if(!t.test(g.domain))throw TypeError("option domain is invalid");N+="; Domain="+g.domain}if(g.path){if(!t.test(g.path))throw TypeError("option path is invalid");N+="; Path="+g.path}if(g.expires){var U=g.expires;if(e.call(U)!=="[object Date]"&&!(U instanceof Date)||isNaN(U.valueOf()))throw TypeError("option expires is invalid");N+="; Expires="+U.toUTCString()}if(g.httpOnly&&(N+="; HttpOnly"),g.secure&&(N+="; Secure"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():g.priority){case"low":N+="; Priority=Low";break;case"medium":N+="; Priority=Medium";break;case"high":N+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":N+="; SameSite=Strict";break;case"lax":N+="; SameSite=Lax";break;case"none":N+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return N};var e=Object.prototype.toString,t=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function r(o){return o.indexOf("%")!==-1?decodeURIComponent(o):o}function i(o){return encodeURIComponent(o)}}},function(){return ve||(0,de[Pe(de)[0]])((ve={exports:{}}).exports,ve),ve.exports}),hr=(wt(Wt()),wt(Wt()));function cr(l){if(!l)return null;try{let e=JSON.parse(l);if(!e)return null;if(e.constructor.name==="Object")return e;if(e.constructor.name!=="Array")throw Error(`Unexpected format: ${e.constructor.name}`);let[t,r,i]=e[0].split("."),o=T(r),p=new TextDecoder,{exp:m,sub:g,...b}=JSON.parse(p.decode(o));return{expires_at:m,expires_in:m-Math.round(Date.now()/1e3),token_type:"bearer",access_token:e[0],refresh_token:e[1],provider_token:e[2],provider_refresh_token:e[3],user:{id:g,factors:e[4],...b}}}catch(e){return console.warn("Failed to parse cookie string:",e),null}}function ur(l){var e;return JSON.stringify([l.access_token,l.refresh_token,l.provider_token,l.provider_refresh_token,((e=l.user)==null?void 0:e.factors)??null])}function Or(){return!1}var ar={path:"/",maxAge:31536e6},dr=class{constructor(l){this.cookieOptions={...ar,...l,maxAge:ar.maxAge}}getItem(l){let e=this.getCookie(l);return e?l.endsWith("-code-verifier")?e:JSON.stringify(cr(e)):null}setItem(l,e){if(l.endsWith("-code-verifier")){this.setCookie(l,e);return}let t=JSON.parse(e),r=ur(t);this.setCookie(l,r)}removeItem(l){this.deleteCookie(l)}},Pr=class extends dr{constructor(l){super(l)}getCookie(l){return null}setCookie(l,e){return null}deleteCookie(l){return null}};function kr(l,e,t){var r;return Xt(l,e,{...t,auth:{flowType:"pkce",autoRefreshToken:!1,detectSessionInUrl:!1,persistSession:!0,storage:t.auth.storage,...(r=t.auth)!=null&&r.storageKey?{storageKey:t.auth.storageKey}:{}}})}var Rr=hr.parse,Ar=hr.serialize;},ys=(ne,J,x)=>{"use strict";ne.exports=x(9046).version},bs=(ne,J,x)=>{"use strict";if(typeof globalThis=="object")M=globalThis;else try{M=x(6756)}catch{}finally{if(!M)throw Error("Could not determine global this")}var M,q=M.WebSocket||M.MozWebSocket,E=x(2094);function T(y,s){return s?new q(y,s):new q(y)}q&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(y){Object.defineProperty(T,y,{get:function(){return q[y]}})}),ne.exports={w3cwebsocket:q?T:null,version:E}},_s=ne=>{"use strict";var J={decodeValues:!0,map:!1,silent:!1};function x(E){return typeof E=="string"&&!!E.trim()}function M(E,T){var y,s,d,c,h=E.split(";").filter(x),a=(y=h.shift(),s="",d="",(c=y.split("=")).length>1?(s=c.shift(),d=c.join("=")):d=y,{name:s,value:d}),n=a.name,u=a.value;T=T?Object.assign({},J,T):J;try{u=T.decodeValues?decodeURIComponent(u):u}catch(v){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+u+"'. Set options.decodeValues to false to disable this feature.",v)}var f={name:n,value:u};return h.forEach(function(v){var _=v.split("="),w=_.shift().trimLeft().toLowerCase(),O=_.join("=");w==="expires"?f.expires=new Date(O):w==="max-age"?f.maxAge=parseInt(O,10):w==="secure"?f.secure=!0:w==="httponly"?f.httpOnly=!0:w==="samesite"?f.sameSite=O:f[w]=O}),f}function q(E,T){if(T=T?Object.assign({},J,T):J,!E)return T.map?{}:[];if(E.headers)if(typeof E.headers.getSetCookie=="function")E=E.headers.getSetCookie();else if(E.headers["set-cookie"])E=E.headers["set-cookie"];else{var y=E.headers[Object.keys(E.headers).find(function(s){return s.toLowerCase()==="set-cookie"})];y||!E.headers.cookie||T.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),E=y}return Array.isArray(E)||(E=[E]),(T=T?Object.assign({},J,T):J).map?E.filter(x).reduce(function(s,d){var c=M(d,T);return s[c.name]=c,s},{}):E.filter(x).map(function(s){return M(s,T)})}ne.exports=q,ne.exports.parse=q,ne.exports.parseString=M,ne.exports.splitCookiesString=function(E){if(Array.isArray(E))return E;if(typeof E!="string")return[];var T,y,s,d,c,h=[],a=0;function n(){for(;a<E.length&&/\s/.test(E.charAt(a));)a+=1;return a<E.length}for(;a<E.length;){for(T=a,c=!1;n();)if((y=E.charAt(a))===","){for(s=a,a+=1,n(),d=a;a<E.length&&(y=E.charAt(a))!=="="&&y!==";"&&y!==",";)a+=1;a<E.length&&E.charAt(a)==="="?(c=!0,a=d,h.push(E.substring(T,s)),T=a):a=s+1}else a+=1;(!c||a>=E.length)&&h.push(E.substring(T,E.length))}return h}},ws=(ne,J,x)=>{"use strict";ne.exports=x(7842)},Ss=(ne,J,x)=>{"use strict";x.d(J,{n:()=>q});var M=x(3329);function q(E,T){if(!(0,M.Y)(E,T))return E;let y=E.slice(T.length);return y.startsWith("/")?y:"/"+y}},xs=(ne,J,x)=>{"use strict";x.d(J,{Y:()=>q});var M=x(5288);function q(E,T){if(typeof E!="string")return!1;let{pathname:y}=(0,M.c)(E);return y===T||y.startsWith(T+"/")}},Cs=(ne,J,x)=>{"use strict";function M(q){let E=q.indexOf("#"),T=q.indexOf("?"),y=T>-1&&(E<0||T<E);return y||E>-1?{pathname:q.substring(0,y?T:E),query:y?q.substring(T,E>-1?E:void 0):"",hash:E>-1?q.slice(E):""}:{pathname:q,query:"",hash:""}}x.d(J,{c:()=>M})},Es=(ne,J,x)=>{"use strict";x.r(J),x.d(J,{decode:()=>T,encode:()=>E});let M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let y=0;y<M.length;y++)q[M.charCodeAt(y)]=y;let E=y=>{let s=new Uint8Array(y),d,c=s.length,h="";for(d=0;d<c;d+=3)h+=M[s[d]>>2]+M[(3&s[d])<<4|s[d+1]>>4]+M[(15&s[d+1])<<2|s[d+2]>>6]+M[63&s[d+2]];return c%3==2?h=h.substring(0,h.length-1)+"=":c%3==1&&(h=h.substring(0,h.length-2)+"=="),h},T=y=>{let s=.75*y.length,d=y.length,c,h=0,a,n,u,f;y[y.length-1]==="="&&(s--,y[y.length-2]==="="&&s--);let v=new ArrayBuffer(s),_=new Uint8Array(v);for(c=0;c<d;c+=4)a=q[y.charCodeAt(c)],n=q[y.charCodeAt(c+1)],u=q[y.charCodeAt(c+2)],f=q[y.charCodeAt(c+3)],_[h++]=a<<2|n>>4,_[h++]=(15&n)<<4|u>>2,_[h++]=(3&u)<<6|63&f;return v}},Ts=(ne,J,x)=>{"use strict";function M(T){let y=new Headers;for(let[s,d]of Object.entries(T)){let c=Array.isArray(d)?d:[d];for(let h of c)h!==void 0&&(typeof h=="number"&&(h=h.toString()),y.append(s,h))}return y}function q(T){let y={},s=[];if(T)for(let[d,c]of T.entries())d.toLowerCase()==="set-cookie"?(s.push(...function(h){var a,n,u,f,v,_=[],w=0;function O(){for(;w<h.length&&/\s/.test(h.charAt(w));)w+=1;return w<h.length}for(;w<h.length;){for(a=w,v=!1;O();)if((n=h.charAt(w))===","){for(u=w,w+=1,O(),f=w;w<h.length&&(n=h.charAt(w))!=="="&&n!==";"&&n!==",";)w+=1;w<h.length&&h.charAt(w)==="="?(v=!0,w=f,_.push(h.substring(a,u)),a=w):w=u+1}else w+=1;(!v||w>=h.length)&&_.push(h.substring(a,h.length))}return _}(c)),y[d]=s.length===1?s[0]:s):y[d]=c;return y}function E(T){try{return String(new URL(String(T)))}catch(y){throw Error(`URL is malformed "${String(T)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:y})}}x.d(J,{EK:()=>M,lb:()=>q,r4:()=>E})},Os=(ne,J,x)=>{"use strict";x.d(J,{x:()=>d});var M=x(6256),q=x(1214),E=x(3764);let T=Symbol("internal response"),y=new Set([301,302,303,307,308]);function s(c,h){var a;if(!(c==null||(a=c.request)==null)&&a.headers){if(!(c.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let n=[];for(let[u,f]of c.request.headers)h.set("x-middleware-request-"+u,f),n.push(u);h.set("x-middleware-override-headers",n.join(","))}}let d=class Ft extends Response{constructor(h,a={}){super(h,a),this[T]={cookies:new E.n(this.headers),url:a.url?new M.c(a.url,{headers:(0,q.lb)(this.headers),nextConfig:a.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[T].cookies}static json(h,a){let n=Response.json(h,a);return new Ft(n.body,n)}static redirect(h,a){let n=typeof a=="number"?a:a?.status??307;if(!y.has(n))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let u=typeof a=="object"?a:{},f=new Headers(u?.headers);return f.set("Location",(0,q.r4)(h)),new Ft(null,{...u,headers:f,status:n})}static rewrite(h,a){let n=new Headers(a?.headers);return n.set("x-middleware-rewrite",(0,q.r4)(h)),s(a,n),new Ft(null,{...a,headers:n})}static next(h){let a=new Headers(h?.headers);return a.set("x-middleware-next","1"),s(h,a),new Ft(null,{...h,headers:a})}}},Ps=(ne,J,x)=>{"use strict";x.d(J,{n:()=>M.ResponseCookies,q:()=>M.RequestCookies});var M=x(1690)},ks=(ne,J,x)=>{"use strict";x.d(J,{Qb:()=>T,_5:()=>s,vr:()=>d});var M=x(3764),q=x(4604);let E=class vr extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new vr}},T=class{static seal(h){return new Proxy(h,{get(a,n,u){switch(n){case"clear":case"delete":case"set":return E.callable;default:return q.g.get(a,n,u)}}})}},y=Symbol.for("next.mutated.cookies");function s(c,h){let a=function(f){let v=f[y];return v&&Array.isArray(v)&&v.length!==0?v:[]}(h);if(a.length===0)return!1;let n=new M.n(c),u=n.getAll();for(let f of a)n.set(f);for(let f of u)n.set(f);return!0}let d=class{static wrap(h,a){let n=new M.n(new Headers);for(let _ of h.getAll())n.set(_);let u=[],f=new Set,v=()=>{var _;let w=fetch.__nextGetStaticStore==null||(_=fetch.__nextGetStaticStore.call(fetch))==null?void 0:_.getStore();if(w&&(w.pathWasRevalidated=!0),u=n.getAll().filter(A=>f.has(A.name)),a){let A=[];for(let G of u){let ee=new M.n(new Headers);ee.set(G),A.push(ee.toString())}a(A)}};return new Proxy(n,{get(_,w,O){switch(w){case y:return u;case"delete":return function(...A){f.add(typeof A[0]=="string"?A[0]:A[0].name);try{_.delete(...A)}finally{v()}};case"set":return function(...A){f.add(typeof A[0]=="string"?A[0]:A[0].name);try{return _.set(...A)}finally{v()}};default:return q.g.get(_,w,O)}}})}}},Is=(ne,J,x)=>{"use strict";x.d(J,{g:()=>M});let M=class{static get(E,T,y){let s=Reflect.get(E,T,y);return typeof s=="function"?s.bind(E):s}static set(E,T,y,s){return Reflect.set(E,T,y,s)}static has(E,T){return Reflect.has(E,T)}static deleteProperty(E,T){return Reflect.deleteProperty(E,T)}}},js=(ne,J,x)=>{"use strict";x.d(J,{h:()=>E});var M=x(4604);let q=class mr extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new mr}},E=class yr extends Headers{constructor(y){super(),this.headers=new Proxy(y,{get(s,d,c){if(typeof d=="symbol")return M.g.get(s,d,c);let h=d.toLowerCase(),a=Object.keys(y).find(n=>n.toLowerCase()===h);if(a!==void 0)return M.g.get(s,a,c)},set(s,d,c,h){if(typeof d=="symbol")return M.g.set(s,d,c,h);let a=d.toLowerCase(),n=Object.keys(y).find(u=>u.toLowerCase()===a);return M.g.set(s,n??d,c,h)},has(s,d){if(typeof d=="symbol")return M.g.has(s,d);let c=d.toLowerCase(),h=Object.keys(y).find(a=>a.toLowerCase()===c);return h!==void 0&&M.g.has(s,h)},deleteProperty(s,d){if(typeof d=="symbol")return M.g.deleteProperty(s,d);let c=d.toLowerCase(),h=Object.keys(y).find(a=>a.toLowerCase()===c);return h===void 0||M.g.deleteProperty(s,h)}})}static seal(y){return new Proxy(y,{get(s,d,c){switch(d){case"append":case"delete":case"set":return q.callable;default:return M.g.get(s,d,c)}}})}merge(y){return Array.isArray(y)?y.join(", "):y}static from(y){return y instanceof Headers?y:new yr(y)}append(y,s){let d=this.headers[y];typeof d=="string"?this.headers[y]=[d,s]:Array.isArray(d)?d.push(s):this.headers[y]=s}delete(y){delete this.headers[y]}get(y){let s=this.headers[y];return s!==void 0?this.merge(s):null}has(y){return this.headers[y]!==void 0}set(y,s){this.headers[y]=s}forEach(y,s){for(let[d,c]of this.entries())y.call(s,c,d,this)}*entries(){for(let y of Object.keys(this.headers)){let s=y.toLowerCase(),d=this.get(s);yield[s,d]}}*keys(){for(let y of Object.keys(this.headers))yield y.toLowerCase()}*values(){for(let y of Object.keys(this.headers))yield this.get(y)}[Symbol.iterator](){return this.entries()}}},Ms=(ne,J,x)=>{"use strict";x.d(J,{c:()=>n});var M=x(542),q=x(5288);function E(u,f){if(!u.startsWith("/")||!f)return u;let{pathname:v,query:_,hash:w}=(0,q.c)(u);return""+f+v+_+w}function T(u,f){if(!u.startsWith("/")||!f)return u;let{pathname:v,query:_,hash:w}=(0,q.c)(u);return""+v+f+_+w}var y=x(3329);function s(u,f){let v,_=u.split("/");return(f||[]).some(w=>!!_[1]&&_[1].toLowerCase()===w.toLowerCase()&&(v=w,_.splice(1,1),u=_.join("/")||"/",!0)),{pathname:u,detectedLocale:v}}var d=x(8752);let c=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function h(u,f){return new URL(String(u).replace(c,"localhost"),f&&String(f).replace(c,"localhost"))}let a=Symbol("NextURLInternal"),n=class br{constructor(f,v,_){let w,O;typeof v=="object"&&"pathname"in v||typeof v=="string"?(w=v,O=_||{}):O=_||v||{},this[a]={url:h(f,w??O.base),options:O,basePath:""},this.analyze()}analyze(){var f,v,_,w,O;let A=function(de,ve){var pe,k;let{basePath:H,i18n:K,trailingSlash:re}=(pe=ve.nextConfig)!=null?pe:{},I={pathname:de,trailingSlash:de!=="/"?de.endsWith("/"):re};H&&(0,y.Y)(I.pathname,H)&&(I.pathname=(0,d.n)(I.pathname,H),I.basePath=H);let $=I.pathname;if(I.pathname.startsWith("/_next/data/")&&I.pathname.endsWith(".json")){let Z=I.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),X=Z[0];I.buildId=X,$=Z[1]!=="index"?"/"+Z.slice(1).join("/"):"/",ve.parseData===!0&&(I.pathname=$)}if(K){let Z=ve.i18nProvider?ve.i18nProvider.analyze(I.pathname):s(I.pathname,K.locales);I.locale=Z.detectedLocale,I.pathname=(k=Z.pathname)!=null?k:I.pathname,!Z.detectedLocale&&I.buildId&&(Z=ve.i18nProvider?ve.i18nProvider.analyze($):s($,K.locales)).detectedLocale&&(I.locale=Z.detectedLocale)}return I}(this[a].url.pathname,{nextConfig:this[a].options.nextConfig,parseData:!0,i18nProvider:this[a].options.i18nProvider}),G=function(de,ve){let pe;if(ve?.host&&!Array.isArray(ve.host))pe=ve.host.toString().split(":")[0];else{if(!de.hostname)return;pe=de.hostname}return pe.toLowerCase()}(this[a].url,this[a].options.headers);this[a].domainLocale=this[a].options.i18nProvider?this[a].options.i18nProvider.detectDomainLocale(G):function(de,ve,pe){if(de)for(let K of(pe&&(pe=pe.toLowerCase()),de)){var k,H;let re=(k=K.domain)==null?void 0:k.split(":")[0].toLowerCase();if(ve===re||pe===K.defaultLocale.toLowerCase()||((H=K.locales)==null?void 0:H.some(I=>I.toLowerCase()===pe)))return K}}((v=this[a].options.nextConfig)==null||(f=v.i18n)==null?void 0:f.domains,G);let ee=((_=this[a].domainLocale)==null?void 0:_.defaultLocale)||((O=this[a].options.nextConfig)==null||(w=O.i18n)==null?void 0:w.defaultLocale);this[a].url.pathname=A.pathname,this[a].defaultLocale=ee,this[a].basePath=A.basePath??"",this[a].buildId=A.buildId,this[a].locale=A.locale??ee,this[a].trailingSlash=A.trailingSlash}formatPathname(){var f;let v;return v=function(_,w,O,A){if(!w||w===O)return _;let G=_.toLowerCase();return!A&&((0,y.Y)(G,"/api")||(0,y.Y)(G,"/"+w.toLowerCase()))?_:E(_,"/"+w)}((f={basePath:this[a].basePath,buildId:this[a].buildId,defaultLocale:this[a].options.forceLocale?void 0:this[a].defaultLocale,locale:this[a].locale,pathname:this[a].url.pathname,trailingSlash:this[a].trailingSlash}).pathname,f.locale,f.buildId?void 0:f.defaultLocale,f.ignorePrefix),(f.buildId||!f.trailingSlash)&&(v=(0,M.Q)(v)),f.buildId&&(v=T(E(v,"/_next/data/"+f.buildId),f.pathname==="/"?"index.json":".json")),v=E(v,f.basePath),!f.buildId&&f.trailingSlash?v.endsWith("/")?v:T(v,"/"):(0,M.Q)(v)}formatSearch(){return this[a].url.search}get buildId(){return this[a].buildId}set buildId(f){this[a].buildId=f}get locale(){return this[a].locale??""}set locale(f){var v,_;if(!this[a].locale||!(!((_=this[a].options.nextConfig)==null||(v=_.i18n)==null)&&v.locales.includes(f)))throw TypeError(`The NextURL configuration includes no locale "${f}"`);this[a].locale=f}get defaultLocale(){return this[a].defaultLocale}get domainLocale(){return this[a].domainLocale}get searchParams(){return this[a].url.searchParams}get host(){return this[a].url.host}set host(f){this[a].url.host=f}get hostname(){return this[a].url.hostname}set hostname(f){this[a].url.hostname=f}get port(){return this[a].url.port}set port(f){this[a].url.port=f}get protocol(){return this[a].url.protocol}set protocol(f){this[a].url.protocol=f}get href(){let f=this.formatPathname(),v=this.formatSearch();return`${this.protocol}//${this.host}${f}${v}${this.hash}`}set href(f){this[a].url=h(f),this.analyze()}get origin(){return this[a].url.origin}get pathname(){return this[a].url.pathname}set pathname(f){this[a].url.pathname=f}get hash(){return this[a].url.hash}set hash(f){this[a].url.hash=f}get search(){return this[a].url.search}set search(f){this[a].url.search=f}get password(){return this[a].url.password}set password(f){this[a].url.password=f}get username(){return this[a].url.username}set username(f){this[a].url.username=f}get basePath(){return this[a].basePath}set basePath(f){this[a].basePath=f.startsWith("/")?f:`/${f}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new br(String(this),this[a].options)}}},Ls=(ne,J,x)=>{"use strict";x.d(J,{Z:()=>M.x});var M=x(3979)},Ds=(ne,J,x)=>{"use strict";let M,q,E;async function T(){if("_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&_ENTRIES.middleware_instrumentation.register)try{await _ENTRIES.middleware_instrumentation.register()}catch(V){throw V.message=`An error occurred while loading instrumentation hook: ${V.message}`,V}}x.d(J,{a:()=>Ct});let y=null;function s(){return y||(y=T()),y}function d(V){return`The edge runtime does not support Node.js '${V}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==x.g.process&&(process.env=x.g.process.env,x.g.process=process),Object.defineProperty(globalThis,"__import_unsupported",{value:function(V){let S=new Proxy(function(){},{get(C,F){if(F==="then")return{};throw Error(d(V))},construct(){throw Error(d(V))},apply(C,F,D){if(typeof D[0]=="function")return D[0](S);throw Error(d(V))}});return new Proxy({},{get:()=>S})},enumerable:!1,configurable:!0}),s();let c=class extends Error{constructor({page:S}){super(`The middleware "${S}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}},h=class extends Error{constructor(){super("The request.page has been deprecated in favour of `URLPattern`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  ")}},a=class extends Error{constructor(){super("The request.ua has been removed in favour of `userAgent` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  ")}};var n=x(1214);let u=Symbol("response"),f=Symbol("passThrough"),v=Symbol("waitUntil"),_=class{constructor(S){this[v]=[],this[f]=!1}respondWith(S){this[u]||(this[u]=Promise.resolve(S))}passThroughOnException(){this[f]=!0}waitUntil(S){this[v].push(S)}},w=class extends _{constructor(S){super(S.request),this.sourcePage=S.page}get request(){throw new c({page:this.sourcePage})}respondWith(){throw new c({page:this.sourcePage})}};var O=x(6256),A=x(3764);let G=Symbol("internal request"),ee=class extends Request{constructor(S,C={}){let F=typeof S!="string"&&"url"in S?S.url:String(S);(0,n.r4)(F),S instanceof Request?super(S,C):super(F,C);let D=new O.c(F,{headers:(0,n.lb)(this.headers),nextConfig:C.nextConfig});this[G]={cookies:new A.q(this.headers),geo:C.geo||{},ip:C.ip,nextUrl:D,url:D.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[G].cookies}get geo(){return this[G].geo}get ip(){return this[G].ip}get nextUrl(){return this[G].nextUrl}get page(){throw new h}get ua(){throw new a}get url(){return this[G].url}};var de=x(3979);function ve(V,S){let C=typeof S=="string"?new URL(S):S,F=new URL(V,S),D=C.protocol+"//"+C.host;return F.protocol+"//"+F.host===D?F.toString().replace(D,""):F.toString()}var pe=x(4313);let k=["__nextFallback","__nextLocale","__nextInferredLocaleFromDefault","__nextDefaultLocale","__nextIsNotFound",pe.H4],H=["__nextDataReq"];var K=x(8510),re=x(6824),I=x(2533),$=x(1276);let Z=class extends ee{constructor(S){super(S.input,S.init),this.sourcePage=S.page}get request(){throw new c({page:this.sourcePage})}respondWith(){throw new c({page:this.sourcePage})}waitUntil(){throw new c({page:this.sourcePage})}},X=[[pe.i4],[pe.ph],[pe.pz]];async function le(V){let S,C;await s();let F=self.__BUILD_MANIFEST!==void 0,D=typeof self.__PRERENDER_MANIFEST=="string"?JSON.parse(self.__PRERENDER_MANIFEST):void 0;V.request.url=(0,K.W)(V.request.url,!0);let te=new O.c(V.request.url,{headers:V.request.headers,nextConfig:V.request.nextConfig}),me=[...te.searchParams.keys()];for(let ce of me){let Re=te.searchParams.getAll(ce);if(ce!==re.dN&&ce.startsWith(re.dN)){let R=ce.substring(re.dN.length);for(let B of(te.searchParams.delete(R),Re))te.searchParams.append(R,B);te.searchParams.delete(ce)}}let ye=te.buildId;te.buildId="";let W=V.request.headers["x-nextjs-data"];W&&te.pathname==="/index"&&(te.pathname="/");let ge=(0,n.EK)(V.request.headers),he=new Map;if(!F)for(let ce of X){let Re=ce.toString().toLowerCase();ge.get(Re)&&(he.set(Re,ge.get(Re)),ge.delete(Re))}let Se=new Z({page:V.page,input:function(ce,Re){let R=typeof ce=="string",B=R?new URL(ce):ce;for(let Y of k)B.searchParams.delete(Y);if(Re)for(let Y of H)B.searchParams.delete(Y);return R?B.toString():B}(te,!0).toString(),init:{body:V.request.body,geo:V.request.geo,headers:ge,ip:V.request.ip,method:V.request.method,nextConfig:V.request.nextConfig,signal:V.request.signal}});W&&Object.defineProperty(Se,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCache&&V.IncrementalCache&&(globalThis.__incrementalCache=new V.IncrementalCache({appDir:!0,fetchCache:!0,minimalMode:!0,fetchCacheKeyPrefix:void 0,dev:!1,requestHeaders:V.request.headers,requestProtocol:"https",getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:{previewModeId:"development-id"}})}));let xe=new w({request:Se,page:V.page});if((S=V.page==="/middleware"||V.page==="/src/middleware"?await I.B.wrap($.F,{req:Se,renderOpts:{onUpdateCookies:ce=>{C=ce},previewProps:D?.preview||{previewModeId:"development-id",previewModeEncryptionKey:"",previewModeSigningKey:""}}},()=>V.handler(Se,xe)):await V.handler(Se,xe))&&!(S instanceof Response))throw TypeError("Expected an instance of Response to be returned");S&&C&&S.headers.set("set-cookie",C);let ze=S?.headers.get("x-middleware-rewrite");if(S&&ze){let ce=new O.c(ze,{forceLocale:!0,headers:V.request.headers,nextConfig:V.request.nextConfig});ce.host===Se.nextUrl.host&&(ce.buildId=ye||ce.buildId,S.headers.set("x-middleware-rewrite",String(ce)));let Re=ve(String(ce),String(te));W&&S.headers.set("x-nextjs-rewrite",Re)}let ot=S?.headers.get("Location");if(S&&ot&&!F){let ce=new O.c(ot,{forceLocale:!1,headers:V.request.headers,nextConfig:V.request.nextConfig});S=new Response(S.body,S),ce.host===Se.nextUrl.host&&(ce.buildId=ye||ce.buildId,S.headers.set("Location",String(ce))),W&&(S.headers.delete("Location"),S.headers.set("x-nextjs-redirect",ve(String(ce),String(te))))}let Qe=S||de.x.next(),st=Qe.headers.get("x-middleware-override-headers"),dt=[];if(st){for(let[ce,Re]of he)Qe.headers.set(`x-middleware-request-${ce}`,Re),dt.push(ce);dt.length>0&&Qe.headers.set("x-middleware-override-headers",st+","+dt.join(","))}return{response:Qe,waitUntil:Promise.all(xe[v]),fetchMetrics:Se.fetchMetrics}}var Me=x(2935),tt=x.n(Me);let Ye=0,vt="x-vercel-cache-tags",rt="x-vercel-sc-headers",ct="x-vercel-revalidate",mt="x-vercel-cache-item-name",Te=class{static isAvailable(S){return!!(S._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL)}constructor(S){if(this.debug=!!process.env.NEXT_PRIVATE_DEBUG_CACHE,this.headers={},this.headers["Content-Type"]="application/json",rt in S._requestHeaders){let D=JSON.parse(S._requestHeaders[rt]);for(let te in D)this.headers[te]=D[te];delete S._requestHeaders[rt]}let C=S._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL,F=S._requestHeaders["x-vercel-sc-basepath"]||process.env.SUSPENSE_CACHE_BASEPATH;process.env.SUSPENSE_CACHE_AUTH_TOKEN&&(this.headers.Authorization=`Bearer ${process.env.SUSPENSE_CACHE_AUTH_TOKEN}`),C?(this.cacheEndpoint=`https://${C}${F||""}`,this.debug&&console.log("using cache endpoint",this.cacheEndpoint)):this.debug&&console.log("no cache endpoint available"),S.maxMemoryCacheSize?M||(this.debug&&console.log("using memory store for fetch cache"),M=new(tt())({max:S.maxMemoryCacheSize,length({value:D}){var te;if(!D)return 25;if(D.kind==="REDIRECT")return JSON.stringify(D.props).length;if(D.kind==="IMAGE")throw Error("invariant image should not be incremental-cache");return D.kind==="FETCH"?JSON.stringify(D.data||"").length:D.kind==="ROUTE"?D.body.length:D.html.length+(((te=JSON.stringify(D.pageData))==null?void 0:te.length)||0)}})):this.debug&&console.log("not using memory store for fetch cache")}async revalidateTag(S){if(this.debug&&console.log("revalidateTag",S),Date.now()<Ye){this.debug&&console.log("rate limited ",Ye);return}try{let C=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/revalidate?tags=${S}`,{method:"POST",headers:this.headers,next:{internal:!0}});if(C.status===429){let F=C.headers.get("retry-after")||"60000";Ye=Date.now()+parseInt(F)}if(!C.ok)throw Error(`Request failed with status ${C.status}.`)}catch(C){console.warn(`Failed to revalidate tag ${S}`,C)}}async get(S,C){let{tags:F,softTags:D,fetchCache:te,fetchIdx:me,fetchUrl:ye}=C;if(!te)return null;if(Date.now()<Ye)return this.debug&&console.log("rate limited"),null;let W=M?.get(S);if(Date.now()-(W?.lastModified||0)>2e3&&(W=void 0),!W&&this.cacheEndpoint)try{let ge=Date.now(),he=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${S}`,{method:"GET",headers:{...this.headers,[mt]:ye,[vt]:F?.join(",")||"",[re.Ar]:D?.join(",")||""},next:{internal:!0,fetchType:"cache-get",fetchUrl:ye,fetchIdx:me}});if(he.status===429){let ze=he.headers.get("retry-after")||"60000";Ye=Date.now()+parseInt(ze)}if(he.status===404)return this.debug&&console.log(`no fetch cache entry for ${S}, duration: ${Date.now()-ge}ms`),null;if(!he.ok)throw console.error(await he.text()),Error(`invalid response from cache ${he.status}`);let Se=await he.json();if(!Se||Se.kind!=="FETCH")throw this.debug&&console.log({cached:Se}),Error("invalid cache value");let xe=he.headers.get("x-vercel-cache-state"),De=he.headers.get("age");W={value:Se,lastModified:xe!=="fresh"?Date.now()-re.BR:Date.now()-1e3*parseInt(De||"0",10)},this.debug&&console.log(`got fetch cache entry for ${S}, duration: ${Date.now()-ge}ms, size: ${Object.keys(Se).length}, cache-state: ${xe} tags: ${F?.join(",")} softTags: ${D?.join(",")}`),W&&M?.set(S,W)}catch(ge){this.debug&&console.error("Failed to get from fetch-cache",ge)}return W||null}async set(S,C,{fetchCache:F,fetchIdx:D,fetchUrl:te,tags:me}){if(F){if(Date.now()<Ye){this.debug&&console.log("rate limited");return}if(M?.set(S,{value:C,lastModified:Date.now()}),this.cacheEndpoint)try{let ye=Date.now();C!==null&&"revalidate"in C&&(this.headers[ct]=C.revalidate.toString()),!this.headers[ct]&&C!==null&&"data"in C&&(this.headers["x-vercel-cache-control"]=C.data.headers["cache-control"]);let W=JSON.stringify({...C,tags:void 0});this.debug&&console.log("set cache",S);let ge=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${S}`,{method:"POST",headers:{...this.headers,[mt]:te||"",[vt]:me?.join(",")||""},body:W,next:{internal:!0,fetchType:"cache-set",fetchUrl:te,fetchIdx:D}});if(ge.status===429){let he=ge.headers.get("retry-after")||"60000";Ye=Date.now()+parseInt(he)}if(!ge.ok)throw this.debug&&console.log(await ge.text()),Error(`invalid response ${ge.status}`);this.debug&&console.log(`successfully set to fetch-cache for ${S}, duration: ${Date.now()-ye}ms, size: ${W.length}`)}catch(ye){this.debug&&console.error("Failed to update fetch cache",ye)}}}};var Et=x(4276),we=x.n(Et);let at=class{constructor(S){this.fs=S.fs,this.flushToDisk=S.flushToDisk,this.serverDistDir=S.serverDistDir,this.appDir=!!S._appDir,this.revalidatedTags=S.revalidatedTags,S.maxMemoryCacheSize&&!q&&(q=new(tt())({max:S.maxMemoryCacheSize,length({value:C}){var F;if(!C)return 25;if(C.kind==="REDIRECT")return JSON.stringify(C.props).length;if(C.kind==="IMAGE")throw Error("invariant image should not be incremental-cache");return C.kind==="FETCH"?JSON.stringify(C.data||"").length:C.kind==="ROUTE"?C.body.length:C.html.length+(((F=JSON.stringify(C.pageData))==null?void 0:F.length)||0)}})),this.serverDistDir&&this.fs&&(this.tagsManifestPath=we().join(this.serverDistDir,"..","cache","fetch-cache","tags-manifest.json"),this.loadTagsManifest())}loadTagsManifest(){if(this.tagsManifestPath&&this.fs&&!E)try{E=JSON.parse(this.fs.readFileSync(this.tagsManifestPath).toString("utf8"))}catch{E={version:1,items:{}}}}async revalidateTag(S){if(this.loadTagsManifest(),!E||!this.tagsManifestPath)return;let C=E.items[S]||{};C.revalidatedAt=Date.now(),E.items[S]=C;try{await this.fs.mkdir(we().dirname(this.tagsManifestPath)),await this.fs.writeFile(this.tagsManifestPath,JSON.stringify(E||{}))}catch(F){console.warn("Failed to update tags manifest.",F)}}async get(S,{tags:C,softTags:F,fetchCache:D}={}){var te,me,ye;let W=q?.get(S);if((W==null||(te=W.value)==null?void 0:te.kind)==="PAGE"){let ge,he=(ye=W.value.headers)==null?void 0:ye[re.Et];typeof he=="string"&&(ge=he.split(",")),ge?.length&&(this.loadTagsManifest(),ge.some(xe=>{var De;return(E==null||(De=E.items[xe])==null?void 0:De.revalidatedAt)&&E?.items[xe].revalidatedAt>=(W?.lastModified||Date.now())})&&(W=void 0))}return W&&(W==null||(me=W.value)==null?void 0:me.kind)==="FETCH"&&(this.loadTagsManifest(),[...C||[],...F||[]].some(Se=>{var xe;return!!this.revalidatedTags.includes(Se)||(E==null||(xe=E.items[Se])==null?void 0:xe.revalidatedAt)&&E?.items[Se].revalidatedAt>=(W?.lastModified||Date.now())})&&(W=void 0)),W||null}async set(S,C,F){if(q?.set(S,{value:C,lastModified:Date.now()}),this.flushToDisk){if(C?.kind==="ROUTE"){let{filePath:D}=await this.getFsPath({pathname:`${S}.body`,appDir:!0});await this.fs.mkdir(we().dirname(D)),await this.fs.writeFile(D,C.body),await this.fs.writeFile(D.replace(/\.body$/,".meta"),JSON.stringify({headers:C.headers,status:C.status}));return}if(C?.kind==="PAGE"){let D=typeof C.pageData=="string",{filePath:te}=await this.getFsPath({pathname:`${S}.html`,appDir:D});await this.fs.mkdir(we().dirname(te)),await this.fs.writeFile(te,C.html),await this.fs.writeFile((await this.getFsPath({pathname:`${S}.${D?"rsc":"json"}`,appDir:D})).filePath,D?C.pageData:JSON.stringify(C.pageData)),(C.headers||C.status)&&await this.fs.writeFile(te.replace(/\.html$/,".meta"),JSON.stringify({headers:C.headers,status:C.status}))}else if(C?.kind==="FETCH"){let{filePath:D}=await this.getFsPath({pathname:S,fetchCache:!0});await this.fs.mkdir(we().dirname(D)),await this.fs.writeFile(D,JSON.stringify({...C,tags:F.tags}))}}}async getFsPath({pathname:S,appDir:C,fetchCache:F}){if(F)return{filePath:we().join(this.serverDistDir,"..","cache","fetch-cache",S),isAppPath:!1};let D=we().join(this.serverDistDir,"pages",S);if(!this.appDir||C===!1)return{filePath:D,isAppPath:!1};try{return await this.fs.readFile(D),{filePath:D,isAppPath:!1}}catch{return{filePath:we().join(this.serverDistDir,"app",S),isAppPath:!0}}}};function Tt(V){return new TextEncoder().encode(V)}var Ot=x(9209),Lt=x(1451);let Pt=/\/\[[^/]+?\](?=\/|$)/;function St(V){return/^\/index(\/|$)/.test(V)&&!Pt.test(V)?"/index"+V:V==="/"?"/index":(0,Lt.e)(V)}function yt(V){return V.replace(/\/$/,"").replace(/\/index$/,"")||"/"}x(9666);let Ue=class{constructor({fs:S,dev:C,appDir:F,flushToDisk:D,fetchCache:te,minimalMode:me,serverDistDir:ye,requestHeaders:W,requestProtocol:ge,maxMemoryCacheSize:he,getPrerenderManifest:Se,fetchCacheKeyPrefix:xe,CurCacheHandler:De,allowedRevalidateHeaderKeys:ze}){var ot,Qe,st,dt;this.locks=new Map,this.unlocks=new Map;let ce=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;De?ce&&console.log("using custom cache handler",De.name):(S&&ye&&(ce&&console.log("using filesystem cache handler"),De=at),Te.isAvailable({_requestHeaders:W})&&me&&te&&(ce&&console.log("using fetch cache handler"),De=Te)),process.env.__NEXT_TEST_MAX_ISR_CACHE&&(he=parseInt(process.env.__NEXT_TEST_MAX_ISR_CACHE,10)),this.dev=C,this.minimalMode=me,this.requestHeaders=W,this.requestProtocol=ge,this.allowedRevalidateHeaderKeys=ze,this.prerenderManifest=Se(),this.fetchCacheKeyPrefix=xe;let Re=[];W[re.y3]===((Qe=this.prerenderManifest)==null||(ot=Qe.preview)==null?void 0:ot.previewModeId)&&(this.isOnDemandRevalidate=!0),me&&typeof W[re.of]=="string"&&W[re.X_]===((dt=this.prerenderManifest)==null||(st=dt.preview)==null?void 0:st.previewModeId)&&(Re=W[re.of].split(",")),De&&(this.cacheHandler=new De({dev:C,fs:S,flushToDisk:D,serverDistDir:ye,revalidatedTags:Re,maxMemoryCacheSize:he,_appDir:!!F,_requestHeaders:W,fetchCacheKeyPrefix:xe}))}calculateRevalidate(S,C,F){if(F)return new Date().getTime()-1e3;let{initialRevalidateSeconds:D}=this.prerenderManifest.routes[yt(S)]||{initialRevalidateSeconds:1};return typeof D=="number"?1e3*D+C:D}_getPathname(S,C){return C?S:St(S)}async unlock(S){let C=this.unlocks.get(S);C&&(C(),this.locks.delete(S),this.unlocks.delete(S))}async lock(S){process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY;let C=()=>Promise.resolve(),F=this.locks.get(S);if(F)await F;else{let D=new Promise(te=>{C=async()=>{te()}});this.locks.set(S,D),this.unlocks.set(S,C)}return C}async revalidateTag(S){var C,F;return process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,(F=this.cacheHandler)==null||(C=F.revalidateTag)==null?void 0:C.call(F,S)}async fetchCacheKey(S,C={}){let F,D=[];if(C.body)if(typeof C.body.getReader=="function"){let ye=C.body,W=ye.getReader(),ge=new Uint8Array;await W.read().then(function he({done:Se,value:xe}){if(!Se){if(xe)try{D.push(typeof xe=="string"?xe:(0,Ot.encode)(xe));let De=typeof xe=="string"?Tt(xe):new Uint8Array(xe),ze=ge;(ge=new Uint8Array(ze.byteLength+De.byteLength)).set(ze),ge.set(De,ze.byteLength)}catch(De){console.error(De)}W.read().then(he)}}),C._ogBody=ge}else if(typeof C.body.keys=="function"){let ye=C.body;for(let W of(C._ogBody=C.body,new Set([...ye.keys()]))){let ge=ye.getAll(W);D.push(`${W}=${(await Promise.all(ge.map(async he=>typeof he=="string"?he:await he.text()))).join(",")}`)}}else if(typeof C.body.arrayBuffer=="function"){let ye=C.body,W=await ye.arrayBuffer();D.push((0,Ot.encode)(await C.body.arrayBuffer())),C._ogBody=new Blob([W],{type:ye.type})}else typeof C.body=="string"&&(D.push(C.body),C._ogBody=C.body);let te=JSON.stringify(["v3",this.fetchCacheKeyPrefix||"",S,C.method,typeof(C.headers||{}).keys=="function"?Object.fromEntries(C.headers):C.headers,C.mode,C.redirect,C.credentials,C.referrer,C.referrerPolicy,C.integrity,C.cache,D]);{var me;let ye=Tt(te);me=await crypto.subtle.digest("SHA-256",ye),F=Array.prototype.map.call(new Uint8Array(me),W=>W.toString(16).padStart(2,"0")).join("")}return F}async get(S,C={}){var F,D,te;let me,ye;if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,this.dev&&(!C.fetchCache||this.requestHeaders["cache-control"]==="no-cache"))return null;S=this._getPathname(S,C.fetchCache);let W=null,ge=C.revalidate,he=await((F=this.cacheHandler)==null?void 0:F.get(S,C));if((he==null||(D=he.value)==null?void 0:D.kind)==="FETCH"){if([...C.tags||[],...C.softTags||[]].some(Qe=>{var st;return(st=this.revalidatedTags)==null?void 0:st.includes(Qe)}))return null;ge=ge||he.value.revalidate;let De=Math.round((Date.now()-(he.lastModified||0))/1e3),ze=De>ge,ot=he.value.data;return{isStale:ze,value:{kind:"FETCH",data:ot,revalidate:ge},revalidateAfter:Date.now()+1e3*ge}}let Se=(te=this.prerenderManifest.routes[yt(S)])==null?void 0:te.initialRevalidateSeconds;return he?.lastModified===-1?(me=-1,ye=-1*re.BR):me=(ye=this.calculateRevalidate(S,he?.lastModified||Date.now(),this.dev&&!C.fetchCache))!==!1&&ye<Date.now()||void 0,he&&(W={isStale:me,curRevalidate:Se,revalidateAfter:ye,value:he.value}),!he&&this.prerenderManifest.notFoundRoutes.includes(S)&&(W={isStale:me,value:null,curRevalidate:Se,revalidateAfter:ye},this.set(S,W.value,C)),W}async set(S,C,F){if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,!this.dev||F.fetchCache){if(F.fetchCache&&JSON.stringify(C).length>2097152){if(this.dev)throw Error("fetch for over 2MB of data can not be cached");return}S=this._getPathname(S,F.fetchCache);try{var D;F.revalidate===void 0||F.fetchCache||(this.prerenderManifest.routes[S]={dataRoute:we().posix.join("/_next/data",`${St(S)}.json`),srcRoute:null,initialRevalidateSeconds:F.revalidate}),await((D=this.cacheHandler)==null?void 0:D.set(S,C,F))}catch(te){console.warn("Failed to update prerender cache for",S,te)}}}};var Dt=x(2404),kt=x(5716);let xt=class{constructor(S){var C;this.definition=S,C=S.pathname,Pt.test(C)&&(this.dynamic=(0,Dt.t)((0,kt.vG)(S.pathname)))}get identity(){return this.definition.pathname}get isDynamic(){return this.dynamic!==void 0}match(S){let C=this.test(S);return C?{definition:this.definition,params:C.params}:null}test(S){if(this.dynamic){let C=this.dynamic(S);return C?{params:C}:null}return S===this.definition.pathname?{}:null}};var Rt=x(542),ut=x(8752);let Ct=class _r{constructor(S){this.routeModule=S,this.matcher=new xt(S.definition)}static wrap(S,C={}){let F=new _r(S);return D=>le({...D,...C,IncrementalCache:Ue,handler:F.handler.bind(F)})}async handler(S,C){let F=(0,Rt.Q)(new URL(S.url).pathname),{basePath:D}=S.nextUrl;D&&(F=(0,ut.n)(F,D));let te=this.matcher.match(F);if(!te)throw Error(`Invariant: no match found for request. Pathname '${F}' should have matched '${this.matcher.definition.pathname}'`);let me=typeof self.__PRERENDER_MANIFEST=="string"?JSON.parse(self.__PRERENDER_MANIFEST):void 0,ye={params:te.params,prerenderManifest:{version:4,routes:{},dynamicRoutes:{},preview:me?.preview||{previewModeEncryptionKey:"",previewModeId:"development-id",previewModeSigningKey:""},notFoundRoutes:[]},staticGenerationContext:{supportsDynamicHTML:!0}},W=await this.routeModule.handle(S,ye);return ye.staticGenerationContext.waitUntil&&C.waitUntil(ye.staticGenerationContext.waitUntil),W}}},Xs=()=>{"getAll"in Headers.prototype||(Headers.prototype.getAll=function(ne){if((ne=ne.toLowerCase())!=="set-cookie")throw Error("Headers.getAll is only supported for Set-Cookie header");return[...this.entries()].filter(([x])=>x===ne).map(([,x])=>x)})},Ws=(ne,J,x)=>{"use strict";let M;x.d(J,{AppRouteRouteModule:()=>Re});var q,E,T,y,s,d,c,h,a,n,u,f,v,_={};x.r(_),x.d(_,{AppRouterContext:()=>Qe,CacheStates:()=>ot,GlobalLayoutRouterContext:()=>dt,LayoutRouterContext:()=>st,TemplateContext:()=>ce});var w={};x.r(w),x.d(w,{appRouterContext:()=>_});let O=class{constructor({userland:B,definition:Y}){this.userland=B,this.definition=Y}};var A=x(2533);let G={wrap(R,{urlPathname:B,renderOpts:Y},fe){let ae=!Y.supportsDynamicHTML&&!Y.isDraftMode&&!Y.isServerAction,oe={isStaticGeneration:ae,urlPathname:B,pagePath:Y.originalPathname,incrementalCache:Y.incrementalCache||globalThis.__incrementalCache,isRevalidate:Y.isRevalidate,isPrerendering:Y.nextExport,fetchCache:Y.fetchCache,isOnDemandRevalidate:Y.isOnDemandRevalidate,isDraftMode:Y.isDraftMode};return Y.store=oe,R.run(oe,fe,oe)}};var ee=x(3576);function de(){return new Response(null,{status:400})}function ve(){return new Response(null,{status:405})}let pe=["GET","HEAD","OPTIONS","POST","PUT","DELETE","PATCH"];(function(R){R.handleRequest="BaseServer.handleRequest",R.run="BaseServer.run",R.pipe="BaseServer.pipe",R.getStaticHTML="BaseServer.getStaticHTML",R.render="BaseServer.render",R.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",R.renderToResponse="BaseServer.renderToResponse",R.renderToHTML="BaseServer.renderToHTML",R.renderError="BaseServer.renderError",R.renderErrorToResponse="BaseServer.renderErrorToResponse",R.renderErrorToHTML="BaseServer.renderErrorToHTML",R.render404="BaseServer.render404"})(q||(q={})),function(R){R.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",R.loadComponents="LoadComponents.loadComponents"}(E||(E={})),function(R){R.getRequestHandler="NextServer.getRequestHandler",R.getServer="NextServer.getServer",R.getServerRequestHandler="NextServer.getServerRequestHandler",R.createServer="createServer.createServer"}(T||(T={})),function(R){R.compression="NextNodeServer.compression",R.getBuildId="NextNodeServer.getBuildId",R.generateStaticRoutes="NextNodeServer.generateStaticRoutes",R.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",R.generatePublicRoutes="NextNodeServer.generatePublicRoutes",R.generateImageRoutes="NextNodeServer.generateImageRoutes.route",R.sendRenderResult="NextNodeServer.sendRenderResult",R.proxyRequest="NextNodeServer.proxyRequest",R.runApi="NextNodeServer.runApi",R.render="NextNodeServer.render",R.renderHTML="NextNodeServer.renderHTML",R.imageOptimizer="NextNodeServer.imageOptimizer",R.getPagePath="NextNodeServer.getPagePath",R.getRoutesManifest="NextNodeServer.getRoutesManifest",R.findPageComponents="NextNodeServer.findPageComponents",R.getFontManifest="NextNodeServer.getFontManifest",R.getServerComponentManifest="NextNodeServer.getServerComponentManifest",R.getRequestHandler="NextNodeServer.getRequestHandler",R.renderToHTML="NextNodeServer.renderToHTML",R.renderError="NextNodeServer.renderError",R.renderErrorToHTML="NextNodeServer.renderErrorToHTML",R.render404="NextNodeServer.render404",R.route="route",R.onProxyReq="onProxyReq",R.apiResolver="apiResolver",R.internalFetch="internalFetch"}(y||(y={})),(s||(s={})).startServer="startServer.startServer",function(R){R.getServerSideProps="Render.getServerSideProps",R.getStaticProps="Render.getStaticProps",R.renderToString="Render.renderToString",R.renderDocument="Render.renderDocument",R.createBodyResult="Render.createBodyResult"}(d||(d={})),function(R){R.renderToString="AppRender.renderToString",R.renderToReadableStream="AppRender.renderToReadableStream",R.getBodyResult="AppRender.getBodyResult",R.fetch="AppRender.fetch"}(c||(c={})),(h||(h={})).executeRoute="Router.executeRoute",(a||(a={})).runHandler="Node.runHandler",(n||(n={})).runHandler="AppRouteRouteHandlers.runHandler",(u||(u={})).generateMetadata="ResolveMetadata.generateMetadata";let k=["BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata"];M=x(6581);let{context:H,trace:K,SpanStatusCode:re,SpanKind:I}=M,$=R=>R!==null&&typeof R=="object"&&typeof R.then=="function",Z=(R,B)=>{B&&R.recordException(B),R.setStatus({code:re.ERROR,message:B?.message}),R.end()},X=new Map,le=M.createContextKey("next.rootSpanId"),Me=0,tt=()=>Me++,Ye=class{getTracerInstance(){return K.getTracer("next.js","0.0.1")}getContext(){return H}getActiveScopeSpan(){return K.getSpan(H?.active())}trace(...B){let[Y,fe,ae]=B,{fn:oe,options:ue}=typeof fe=="function"?{fn:fe,options:{}}:{fn:ae,options:{...fe}};if(!k.includes(Y)&&process.env.NEXT_OTEL_VERBOSE!=="1"||ue.hideSpan)return oe();let Ce=ue.spanName??Y,Fe=this.getSpanContext(ue?.parentSpan??this.getActiveScopeSpan()),Be=!1;Fe||(Fe=M.ROOT_CONTEXT,Be=!0);let Ge=tt();return ue.attributes={"next.span_name":Ce,"next.span_type":Y,...ue.attributes},M.context.with(Fe.setValue(le,Ge),()=>this.getTracerInstance().startActiveSpan(Ce,ue,Oe=>{let Le=()=>{X.delete(Ge)};Be&&X.set(Ge,new Map(Object.entries(ue.attributes??{})));try{if(oe.length>1)return oe(Oe,Je=>Z(Oe,Je));let $e=oe(Oe);return $($e)?$e.then(()=>Oe.end(),Je=>Z(Oe,Je)).finally(Le):(Oe.end(),Le()),$e}catch($e){throw Z(Oe,$e),Le(),$e}}))}wrap(...B){let Y=this,[fe,ae,oe]=B.length===3?B:[B[0],{},B[1]];return k.includes(fe)||process.env.NEXT_OTEL_VERBOSE==="1"?function(){let ue=ae;typeof ue=="function"&&typeof oe=="function"&&(ue=ue.apply(this,arguments));let Ce=arguments.length-1,Fe=arguments[Ce];if(typeof Fe!="function")return Y.trace(fe,ue,()=>oe.apply(this,arguments));{let Be=Y.getContext().bind(H.active(),Fe);return Y.trace(fe,ue,(Ge,Oe)=>(arguments[Ce]=function(Le){return Oe?.(Le),Be.apply(this,arguments)},oe.apply(this,arguments)))}}:oe}startSpan(...B){let[Y,fe]=B,ae=this.getSpanContext(fe?.parentSpan??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(Y,fe,ae)}getSpanContext(B){return B?K.setSpan(H.active(),B):void 0}getRootSpanAttributes(){let B=H.active().getValue(le);return X.get(B)}},vt=(()=>{let R=new Ye;return()=>R})();var rt=x(6824);let{env:ct,stdout:mt}=((f=globalThis)==null?void 0:f.process)??{},Te=ct&&!ct.NO_COLOR&&(ct.FORCE_COLOR||mt?.isTTY&&!ct.CI&&ct.TERM!=="dumb"),Et=(R,B,Y,fe)=>{let ae=R.substring(0,fe)+Y,oe=R.substring(fe+B.length),ue=oe.indexOf(B);return~ue?ae+Et(oe,B,Y,ue):ae+oe},we=(R,B,Y=R)=>fe=>{let ae=""+fe,oe=ae.indexOf(B,R.length);return~oe?R+Et(ae,B,Y,oe)+B:R+ae+B},at=Te?we("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"):String;Te&&we("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),Te&&we("\x1B[3m","\x1B[23m"),Te&&we("\x1B[4m","\x1B[24m"),Te&&we("\x1B[7m","\x1B[27m"),Te&&we("\x1B[8m","\x1B[28m"),Te&&we("\x1B[9m","\x1B[29m"),Te&&we("\x1B[30m","\x1B[39m");let Tt=Te?we("\x1B[31m","\x1B[39m"):String,Ot=Te?we("\x1B[32m","\x1B[39m"):String,Lt=Te?we("\x1B[33m","\x1B[39m"):String;Te&&we("\x1B[34m","\x1B[39m");let Pt=Te?we("\x1B[35m","\x1B[39m"):String;Te&&we("\x1B[36m","\x1B[39m");let St=Te?we("\x1B[37m","\x1B[39m"):String;Te&&we("\x1B[90m","\x1B[39m"),Te&&we("\x1B[40m","\x1B[49m"),Te&&we("\x1B[41m","\x1B[49m"),Te&&we("\x1B[42m","\x1B[49m"),Te&&we("\x1B[43m","\x1B[49m"),Te&&we("\x1B[44m","\x1B[49m"),Te&&we("\x1B[45m","\x1B[49m"),Te&&we("\x1B[46m","\x1B[49m"),Te&&we("\x1B[47m","\x1B[49m");let yt={wait:St(at("\u25CB")),error:Tt(at("\u2A2F")),warn:Lt(at("\u26A0")),ready:at("\u25B2"),info:St(at(" ")),event:Ot(at("\u2713")),trace:Pt(at("\xBB"))},Ue={log:"log",warn:"warn",error:"error"};var Dt=x(6195).Buffer;let kt=R=>{let B=["/layout"];if(R.startsWith("/")){let Y=R.split("/");for(let fe=1;fe<Y.length+1;fe++){let ae=Y.slice(0,fe).join("/");ae&&(ae.endsWith("/page")||ae.endsWith("/route")||(ae=`${ae}${ae.endsWith("/")?"":"/"}layout`),B.push(ae))}}return B};function xt(R){var B,Y;let fe=[];if(!R)return fe;let{pagePath:ae,urlPathname:oe}=R;if(Array.isArray(R.tags)||(R.tags=[]),ae){let ue=kt(ae);for(let Ce of ue)Ce=`${rt.zt}${Ce}`,(B=R.tags)!=null&&B.includes(Ce)||R.tags.push(Ce),fe.push(Ce)}if(oe){let ue=`${rt.zt}${oe}`;(Y=R.tags)!=null&&Y.includes(ue)||R.tags.push(ue),fe.push(ue)}return fe}function Rt(R,B){if(!R)return;R.fetchMetrics||(R.fetchMetrics=[]);let Y=["url","status","method"];R.fetchMetrics.some(fe=>Y.every(ae=>fe[ae]===B[ae]))||R.fetchMetrics.push({url:B.url,cacheStatus:B.cacheStatus,cacheReason:B.cacheReason,status:B.status,method:B.method,start:B.start,end:Date.now(),idx:R.nextFetchId||0})}var ut=x(1690),Ct=x(6256);function V(R){let B=new URL(R);return B.host="localhost:3000",B.search="",B.protocol="http",B.toString()}var S=x(1276);function C(R){if(typeof R?.digest!="string")return!1;let[B,Y,fe,ae]=R.digest.split(";",4);return B==="NEXT_REDIRECT"&&(Y==="replace"||Y==="push")&&typeof fe=="string"&&(ae==="true"||ae==="false")}(function(R){R.push="push",R.replace="replace"})(v||(v={}));let F=["HEAD","OPTIONS"],D=["OPTIONS","POST","PUT","DELETE","PATCH"];var te=x(6085),me=x(3779),ye=x(7842),W=x(474),ge=x(4083),he=x(4927),Se=x(718);let xe=(0,Se.D)(String.raw`/Users/hamedyaghouti/Desktop/Projects/learning/supabase/supabase-nextjs-twitter-clone/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js`),{__esModule:De,$$typeof:ze}=xe;xe.default;let ot=xe.CacheStates,Qe=xe.AppRouterContext,st=xe.LayoutRouterContext,dt=xe.GlobalLayoutRouterContext,ce=xe.TemplateContext,Re=class extends O{static#e=this.sharedModules=w;static is(B){return B.definition.kind===te.x.APP_ROUTE}constructor({userland:B,definition:Y,resolvedPagePath:fe,nextConfigOutput:ae}){if(super({userland:B,definition:Y}),this.requestAsyncStorage=S.F,this.staticGenerationAsyncStorage=ge.A,this.serverHooks=me,this.headerHooks=ye,this.staticGenerationBailout=W.o,this.actionAsyncStorage=he.W,this.resolvedPagePath=fe,this.nextConfigOutput=ae,this.methods=function(oe){let ue=pe.reduce((Be,Ge)=>({...Be,[Ge]:oe[Ge]??ve}),{}),Ce=new Set(pe.filter(Be=>oe[Be])),Fe=F.filter(Be=>!Ce.has(Be));for(let Be of Fe){if(Be==="HEAD"){if(!oe.GET)break;ue.HEAD=oe.GET,Ce.add("HEAD");continue}if(Be==="OPTIONS"){let Ge=["OPTIONS",...Ce];!Ce.has("HEAD")&&Ce.has("GET")&&Ge.push("HEAD");let Oe={Allow:Ge.sort().join(", ")};ue.OPTIONS=()=>new Response(null,{status:204,headers:Oe}),Ce.add("OPTIONS");continue}throw Error(`Invariant: should handle all automatic implementable methods, got method: ${Be}`)}return ue}(B),this.nonStaticMethods=function(oe){let ue=D.filter(Ce=>oe[Ce]);return ue.length!==0&&ue}(B),this.dynamic=this.userland.dynamic,this.nextConfigOutput==="export")if(this.dynamic&&this.dynamic!=="auto"){if(this.dynamic==="force-dynamic")throw Error(`export const dynamic = "force-dynamic" on page "${Y.pathname}" cannot be used with "output: export". See more info here: https://nextjs.org/docs/advanced-features/static-html-export`)}else this.dynamic="error"}resolve(B){return pe.includes(B)?this.methods[B]:de}async execute(B,Y){let fe=this.resolve(B.method),ae={req:B};ae.renderOpts={previewProps:Y.prerenderManifest.preview};let oe={urlPathname:B.nextUrl.pathname,renderOpts:Y.staticGenerationContext??{supportsDynamicHTML:!1,originalPathname:this.definition.pathname}};oe.renderOpts.fetchCache=this.userland.fetchCache;let ue=await this.actionAsyncStorage.run({isAppRoute:!0},()=>A.B.wrap(this.requestAsyncStorage,ae,()=>G.wrap(this.staticGenerationAsyncStorage,oe,Ce=>{var Fe;switch(this.nonStaticMethods&&this.staticGenerationBailout(`non-static methods used ${this.nonStaticMethods.join(", ")}`),this.dynamic){case"force-dynamic":Ce.forceDynamic=!0,this.staticGenerationBailout("force-dynamic",{dynamic:this.dynamic});break;case"force-static":Ce.forceStatic=!0;break;case"error":Ce.dynamicShouldError=!0}Ce.revalidate??=this.userland.revalidate??!1;let Be=function(Oe,{dynamic:Le},$e){function Je(Q){switch(Q){case"search":case"searchParams":case"toString":case"href":case"origin":$e.staticGenerationBailout(`nextUrl.${Q}`);return;default:return}}let z={},gt=(Q,Ae)=>{switch(Ae){case"search":return"";case"searchParams":return z.searchParams||(z.searchParams=new URLSearchParams),z.searchParams;case"url":case"href":return z.url||(z.url=V(Q)),z.url;case"toJSON":case"toString":return z.url||(z.url=V(Q)),z.toString||(z.toString=()=>z.url),z.toString;case"headers":return z.headers||(z.headers=new Headers),z.headers;case"cookies":return z.headers||(z.headers=new Headers),z.cookies||(z.cookies=new ut.RequestCookies(z.headers)),z.cookies;case"clone":return z.url||(z.url=V(Q)),()=>new Ct.c(z.url)}},pt=new Proxy(Oe.nextUrl,{get(Q,Ae){if(Je(Ae),Le==="force-static"&&typeof Ae=="string"){let He=gt(Q.href,Ae);if(He!==void 0)return He}let qe=Q[Ae];return typeof qe=="function"?qe.bind(Q):qe},set:(Q,Ae,qe)=>(Je(Ae),Q[Ae]=qe,!0)}),ke=Q=>{switch(Q){case"headers":$e.headerHooks.headers();return;case"url":case"body":case"blob":case"json":case"text":case"arrayBuffer":case"formData":$e.staticGenerationBailout(`request.${Q}`);return;default:return}};return new Proxy(Oe,{get(Q,Ae){if(ke(Ae),Ae==="nextUrl")return pt;if(Le==="force-static"&&typeof Ae=="string"){let He=gt(Q.url,Ae);if(He!==void 0)return He}let qe=Q[Ae];return typeof qe=="function"?qe.bind(Q):qe},set:(Q,Ae,qe)=>(ke(Ae),Q[Ae]=qe,!0)})}(B,{dynamic:this.dynamic},{headerHooks:this.headerHooks,serverHooks:this.serverHooks,staticGenerationBailout:this.staticGenerationBailout}),Ge=function(Oe){let Le="/app/";Oe.includes(Le)||(Le="\\app\\");let[,...$e]=Oe.split(Le);return(Le[0]+$e.join(Le)).split(".").slice(0,-1).join(".")}(this.resolvedPagePath);return(Fe=vt().getRootSpanAttributes())==null||Fe.set("next.route",Ge),vt().trace(n.runHandler,{spanName:`executing api route (app) ${Ge}`,attributes:{"next.route":Ge}},async()=>{var Oe;(function({serverHooks:Je,staticGenerationAsyncStorage:z}){if(globalThis._nextOriginalFetch||(globalThis._nextOriginalFetch=globalThis.fetch),globalThis.fetch.__nextPatched)return;let{DynamicServerError:gt}=Je,pt=globalThis._nextOriginalFetch;globalThis.fetch=async(ke,Q)=>{var Ae,qe;let He;try{(He=new URL(ke instanceof Request?ke.url:ke)).username="",He.password=""}catch{He=void 0}let Ze=He?.href??"",At=Date.now(),$t=(Q==null||(Ae=Q.method)==null?void 0:Ae.toUpperCase())||"GET",Gt=((qe=Q?.next)==null?void 0:qe.internal)===!0;return await vt().trace(Gt?y.internalFetch:c.fetch,{kind:I.CLIENT,spanName:["fetch",$t,Ze].filter(Boolean).join(" "),attributes:{"http.url":Ze,"http.method":$t,"net.peer.name":He?.hostname,"net.peer.port":He?.port||void 0}},async()=>{var bt;let _t,Ut,Ie,L=z.getStore()||(fetch.__nextGetStaticStore==null?void 0:fetch.__nextGetStaticStore.call(fetch)),It=ke&&typeof ke=="object"&&typeof ke.method=="string",it=Ee=>(It?ke[Ee]:null)||Q?.[Ee];if(!L||Gt||L.isDraftMode)return pt(ke,Q);let lt=Ee=>{var Ve,Pe,Ne;return(Q==null||(Ve=Q.next)==null?void 0:Ve[Ee])!==void 0?Q==null||(Pe=Q.next)==null?void 0:Pe[Ee]:It?(Ne=ke.next)==null?void 0:Ne[Ee]:void 0},ht=lt("revalidate"),Nt=function(Ee,Ve){let Pe=[],Ne=[];for(let _e of Ee)typeof _e!="string"?Ne.push({tag:_e,reason:"invalid type, must be a string"}):_e.length>rt.Ho?Ne.push({tag:_e,reason:`exceeded max length of ${rt.Ho}`}):Pe.push(_e);if(Ne.length>0)for(let{tag:_e,reason:Ke}of(console.warn(`Warning: invalid tags passed to ${Ve}: `),Ne))console.log(`tag: "${_e}" ${Ke}`);return Pe}(lt("tags")||[],`fetch ${ke.toString()}`);if(Array.isArray(Nt))for(let Ee of(L.tags||(L.tags=[]),Nt))L.tags.includes(Ee)||L.tags.push(Ee);let Qt=xt(L),Zt=L.fetchCache==="only-cache",er=L.fetchCache==="force-cache",Jt=L.fetchCache==="default-cache",tr=L.fetchCache==="default-no-store",rr=L.fetchCache==="only-no-store",Vt=L.fetchCache==="force-no-store",ft=it("cache"),We="";typeof ft=="string"&&ht!==void 0&&(function(...Ee){(function(Ve,...Pe){(Pe[0]===""||Pe[0]===void 0)&&Pe.length===1&&Pe.shift();let Ne=Ve in Ue?Ue[Ve]:"log",_e=yt[Ve];Pe.length===0?console[Ne](""):console[Ne](" "+_e,...Pe)})("warn",...Ee)}(`fetch for ${Ze} on ${L.urlPathname} specified "cache: ${ft}" and "revalidate: ${ht}", only one should be specified.`),ft=void 0),ft==="force-cache"&&(ht=!1),["no-cache","no-store"].includes(ft||"")&&(ht=0,We=`cache: ${ft}`),(typeof ht=="number"||ht===!1)&&(Ie=ht);let jt=it("headers"),Bt=typeof jt?.get=="function"?jt:new Headers(jt||{}),sr=Bt.get("authorization")||Bt.get("cookie"),ir=!["get","head"].includes(((bt=it("method"))==null?void 0:bt.toLowerCase())||"get"),zt=(sr||ir)&&L.revalidate===0;if(Vt&&(Ie=0,We="fetchCache = force-no-store"),rr){if(ft==="force-cache"||Ie===0)throw Error(`cache: 'force-cache' used on fetch for ${Ze} with 'export const fetchCache = 'only-no-store'`);Ie=0,We="fetchCache = only-no-store"}if(Zt&&ft==="no-store")throw Error(`cache: 'no-store' used on fetch for ${Ze} with 'export const fetchCache = 'only-cache'`);er&&(ht===void 0||ht===0)&&(We="fetchCache = force-cache",Ie=!1),Ie===void 0?Jt?(Ie=!1,We="fetchCache = default-cache"):zt?(Ie=0,We="auto no cache"):tr?(Ie=0,We="fetchCache = default-no-store"):(We="auto cache",Ie=typeof L.revalidate!="boolean"&&L.revalidate!==void 0&&L.revalidate):We||(We=`revalidate: ${Ie}`),!zt&&(L.revalidate===void 0||typeof Ie=="number"&&(L.revalidate===!1||typeof L.revalidate=="number"&&Ie<L.revalidate))&&(L.revalidate=Ie);let Kt=typeof Ie=="number"&&Ie>0||Ie===!1;if(L.incrementalCache&&Kt)try{_t=await L.incrementalCache.fetchCacheKey(Ze,It?ke:Q)}catch{console.error("Failed to generate cache key for",ke)}let Mt=L.nextFetchId??1;L.nextFetchId=Mt+1;let nr=typeof Ie!="number"?rt.BR:Ie,Xt=async(Ee,Ve)=>{let Pe=["credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","window","duplex",...Ee?[]:["signal"]];if(It){let _e=ke,Ke={body:_e._ogBody||_e.body};for(let wt of Pe)Ke[wt]=_e[wt];ke=new Request(_e.url,Ke)}else if(Q){let _e=Q;for(let Ke of(Q={body:Q._ogBody||Q.body},Pe))Q[Ke]=_e[Ke]}let Ne={...Q,next:{...Q?.next,fetchType:"origin",fetchIdx:Mt}};return pt(ke,Ne).then(async _e=>{if(Ee||Rt(L,{start:At,url:Ze,cacheReason:Ve||We,cacheStatus:Ie===0||Ve?"skip":"miss",status:_e.status,method:Ne.method||"GET"}),_e.status===200&&L.incrementalCache&&_t&&Kt){let Ke=Dt.from(await _e.arrayBuffer());try{await L.incrementalCache.set(_t,{kind:"FETCH",data:{headers:Object.fromEntries(_e.headers.entries()),body:Ke.toString("base64"),status:_e.status,url:_e.url},revalidate:nr},{fetchCache:!0,revalidate:Ie,fetchUrl:Ze,fetchIdx:Mt,tags:Nt})}catch(Wt){console.warn("Failed to set fetch cache",ke,Wt)}let wt=new Response(Ke,{headers:new Headers(_e.headers),status:_e.status});return Object.defineProperty(wt,"url",{value:_e.url}),wt}return _e})},Ht=()=>Promise.resolve();if(_t&&L.incrementalCache){Ht=await L.incrementalCache.lock(_t);let Ee=L.isOnDemandRevalidate?null:await L.incrementalCache.get(_t,{fetchCache:!0,revalidate:Ie,fetchUrl:Ze,fetchIdx:Mt,tags:Nt,softTags:Qt});if(Ee?await Ht():Ut="cache-control: no-cache (hard refresh)",Ee?.value&&Ee.value.kind==="FETCH"&&!(L.isRevalidate&&Ee.isStale)){let Ve;Ee.isStale&&(L.pendingRevalidates||(L.pendingRevalidates=[]),L.pendingRevalidates.push(Xt(!0).catch(console.error)));let Pe=Ee.value.data;{let{decode:_e}=x(9209);Ve=_e(Pe.body)}Rt(L,{start:At,url:Ze,cacheReason:We,cacheStatus:"hit",status:Pe.status||200,method:Q?.method||"GET"});let Ne=new Response(Ve,{headers:Pe.headers,status:Pe.status});return Object.defineProperty(Ne,"url",{value:Ee.value.data.url}),Ne}}if(L.isStaticGeneration&&Q&&typeof Q=="object"){let Ee=Q.cache;if(delete Q.cache,Ee==="no-store"){L.revalidate=0;let Ne=`no-store fetch ${ke}${L.urlPathname?` ${L.urlPathname}`:""}`,_e=new gt(Ne);L.dynamicUsageErr=_e,L.dynamicUsageStack=_e.stack,L.dynamicUsageDescription=Ne}let Ve="next"in Q,Pe=Q.next||{};if(typeof Pe.revalidate=="number"&&(L.revalidate===void 0||typeof L.revalidate=="number"&&Pe.revalidate<L.revalidate)){let Ne=L.forceDynamic;if(Ne&&Pe.revalidate===0||(L.revalidate=Pe.revalidate),!Ne&&Pe.revalidate===0){let _e=`revalidate: ${Pe.revalidate} fetch ${ke}${L.urlPathname?` ${L.urlPathname}`:""}`,Ke=new gt(_e);L.dynamicUsageErr=Ke,L.dynamicUsageStack=Ke.stack,L.dynamicUsageDescription=_e}}Ve&&delete Q.next}return Xt(!1,Ut).finally(Ht)})},globalThis.fetch.__nextGetStaticStore=()=>z,globalThis.fetch.__nextPatched=!0})({serverHooks:this.serverHooks,staticGenerationAsyncStorage:this.staticGenerationAsyncStorage});let Le=await fe(Be,{params:Y.params?function(Je){let z={};for(let[gt,pt]of Object.entries(Je))pt!==void 0&&(z[gt]=pt);return z}(Y.params):void 0});if(!(Le instanceof Response))throw Error(`No response is returned from route handler '${this.resolvedPagePath}'. Ensure you return a \`Response\` or a \`NextResponse\` in all branches of your handler.`);Y.staticGenerationContext.fetchMetrics=Ce.fetchMetrics,Y.staticGenerationContext.waitUntil=Promise.all(Ce.pendingRevalidates||[]),xt(Ce),Y.staticGenerationContext.fetchTags=(Oe=Ce.tags)==null?void 0:Oe.join(",");let $e=this.requestAsyncStorage.getStore();if($e&&$e.mutableCookies){let Je=new Headers(Le.headers);if((0,ee._5)(Je,$e.mutableCookies))return new Response(Le.body,{status:Le.status,statusText:Le.statusText,headers:Je})}return Le})})));if(!(ue instanceof Response))return new Response(null,{status:500});if(ue.headers.has("x-middleware-rewrite"))throw Error("NextResponse.rewrite() was used in a app route handler, this is not currently supported. Please remove the invocation to continue.");if(ue.headers.get("x-middleware-next")==="1")throw Error("NextResponse.next() was used in a app route handler, this is not supported. See here for more info: https://nextjs.org/docs/messages/next-response-next-in-app-route-handler");return ue}async handle(B,Y){try{return await this.execute(B,Y)}catch(fe){let ae=function(oe){if(C(oe)){let ue=C(oe)?oe.digest.split(";",3)[2]:null;if(!ue)throw Error("Invariant: Unexpected redirect url format");let Ce=function(Fe){if(!C(Fe))throw Error("Not a redirect error");return Fe.digest.split(";",4)[3]==="true"?308:307}(oe);return function(Fe,Be,Ge){let Oe=new Headers({location:Fe});return(0,ee._5)(Oe,Be),new Response(null,{status:Ge,headers:Oe})}(ue,oe.mutableCookies,Ce)}return oe?.digest==="NEXT_NOT_FOUND"&&new Response(null,{status:404})}(fe);if(!ae)throw fe;return ae}}}},ei=(ne,J,x)=>{"use strict";ne.exports=x(4649)},ti=(ne,J,x)=>{"use strict";x.d(J,{B:()=>c});var M=x(4313),q=x(7664),E=x(3576),T=x(3764),y=x(6824);let s="__prerender_bypass";Symbol("__next_preview_data"),Symbol(s);let d=class{constructor(a,n,u,f){var v;let _=a&&function(O,A){let G=q.h.from(O.headers),ee=G.get(y.y3),de=ee===A.previewModeId,ve=G.has(y.Qq);return{isOnDemandRevalidate:de,revalidateOnlyGenerated:ve}}(n,a).isOnDemandRevalidate,w=(v=u.get(s))==null?void 0:v.value;this.isEnabled=!!(!_&&w&&a&&w===a.previewModeId),this._previewModeId=a?.previewModeId,this._mutableCookies=f}enable(){if(!this._previewModeId)throw Error("Invariant: previewProps missing previewModeId this should never happen");this._mutableCookies.set({name:s,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"})}disable(){this._mutableCookies.set({name:s,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)})}},c={wrap(h,{req:a,res:n,renderOpts:u},f){let v;function _(A){n&&n.setHeader("Set-Cookie",A)}u&&"previewProps"in u&&(v=u.previewProps);let w={},O={get headers(){return w.headers||(w.headers=function(A){let G=q.h.from(A);for(let ee of M.vu)G.delete(ee.toString().toLowerCase());return q.h.seal(G)}(a.headers)),w.headers},get cookies(){return w.cookies||(w.cookies=function(A){let G=new T.q(q.h.from(A));return E.Qb.seal(G)}(a.headers)),w.cookies},get mutableCookies(){return w.mutableCookies||(w.mutableCookies=function(A,G){let ee=new T.q(q.h.from(A));return E.vr.wrap(ee,G)}(a.headers,u?.onUpdateCookies||(n?_:void 0))),w.mutableCookies},get draftMode(){return w.draftMode||(w.draftMode=new d(v,a,this.cookies,this.mutableCookies)),w.draftMode}};return h.run(O,f,O)}}},si=(ne,J,x)=>{"use strict";x.r(J),x.d(J,{cookies:()=>h,draftMode:()=>a,headers:()=>c});var M=x(3576),q=x(7664),E=x(3764),T=x(1276),y=x(4927),s=x(474);let d=class{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,s.o)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,s.o)("draftMode().disable()"))return this._provider.disable()}constructor(u){this._provider=u}};function c(){if((0,s.o)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return q.h.seal(new Headers({}));let n=T.F.getStore();if(!n)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return n.headers}function h(){if((0,s.o)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return M.Qb.seal(new E.q(new Headers({})));let n=T.F.getStore();if(!n)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let u=y.W.getStore();return u&&(u.isAction||u.isAppRoute)?n.mutableCookies:n.cookies}function a(){let n=T.F.getStore();if(!n)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new d(n.draftMode)}},ni=ne=>{"use strict";(()=>{var J={806:(E,T,y)=>{let s=y(190),d=Symbol("max"),c=Symbol("length"),h=Symbol("lengthCalculator"),a=Symbol("allowStale"),n=Symbol("maxAge"),u=Symbol("dispose"),f=Symbol("noDisposeOnSet"),v=Symbol("lruList"),_=Symbol("cache"),w=Symbol("updateAgeOnGet"),O=()=>1,A=(k,H,K)=>{let re=k[_].get(H);if(re){let I=re.value;if(G(k,I)){if(de(k,re),!k[a])return}else K&&(k[w]&&(re.value.now=Date.now()),k[v].unshiftNode(re));return I.value}},G=(k,H)=>{if(!H||!H.maxAge&&!k[n])return!1;let K=Date.now()-H.now;return H.maxAge?K>H.maxAge:k[n]&&K>k[n]},ee=k=>{if(k[c]>k[d])for(let H=k[v].tail;k[c]>k[d]&&H!==null;){let K=H.prev;de(k,H),H=K}},de=(k,H)=>{if(H){let K=H.value;k[u]&&k[u](K.key,K.value),k[c]-=K.length,k[_].delete(K.key),k[v].removeNode(H)}},ve=class{constructor(H,K,re,I,$){this.key=H,this.value=K,this.length=re,this.now=I,this.maxAge=$||0}},pe=(k,H,K,re)=>{let I=K.value;G(k,I)&&(de(k,K),k[a]||(I=void 0)),I&&H.call(re,I.value,I.key,k)};E.exports=class{constructor(k){if(typeof k=="number"&&(k={max:k}),k||(k={}),k.max&&(typeof k.max!="number"||k.max<0))throw TypeError("max must be a non-negative number");this[d]=k.max||1/0;let H=k.length||O;if(this[h]=typeof H!="function"?O:H,this[a]=k.stale||!1,k.maxAge&&typeof k.maxAge!="number")throw TypeError("maxAge must be a number");this[n]=k.maxAge||0,this[u]=k.dispose,this[f]=k.noDisposeOnSet||!1,this[w]=k.updateAgeOnGet||!1,this.reset()}set max(k){if(typeof k!="number"||k<0)throw TypeError("max must be a non-negative number");this[d]=k||1/0,ee(this)}get max(){return this[d]}set allowStale(k){this[a]=!!k}get allowStale(){return this[a]}set maxAge(k){if(typeof k!="number")throw TypeError("maxAge must be a non-negative number");this[n]=k,ee(this)}get maxAge(){return this[n]}set lengthCalculator(k){typeof k!="function"&&(k=O),k!==this[h]&&(this[h]=k,this[c]=0,this[v].forEach(H=>{H.length=this[h](H.value,H.key),this[c]+=H.length})),ee(this)}get lengthCalculator(){return this[h]}get length(){return this[c]}get itemCount(){return this[v].length}rforEach(k,H){H=H||this;for(let K=this[v].tail;K!==null;){let re=K.prev;pe(this,k,K,H),K=re}}forEach(k,H){H=H||this;for(let K=this[v].head;K!==null;){let re=K.next;pe(this,k,K,H),K=re}}keys(){return this[v].toArray().map(k=>k.key)}values(){return this[v].toArray().map(k=>k.value)}reset(){this[u]&&this[v]&&this[v].length&&this[v].forEach(k=>this[u](k.key,k.value)),this[_]=new Map,this[v]=new s,this[c]=0}dump(){return this[v].map(k=>!G(this,k)&&{k:k.key,v:k.value,e:k.now+(k.maxAge||0)}).toArray().filter(k=>k)}dumpLru(){return this[v]}set(k,H,K){if((K=K||this[n])&&typeof K!="number")throw TypeError("maxAge must be a number");let re=K?Date.now():0,I=this[h](H,k);if(this[_].has(k)){if(I>this[d])return de(this,this[_].get(k)),!1;let Z=this[_].get(k),X=Z.value;return this[u]&&!this[f]&&this[u](k,X.value),X.now=re,X.maxAge=K,X.value=H,this[c]+=I-X.length,X.length=I,this.get(k),ee(this),!0}let $=new ve(k,H,I,re,K);return $.length>this[d]?(this[u]&&this[u](k,H),!1):(this[c]+=$.length,this[v].unshift($),this[_].set(k,this[v].head),ee(this),!0)}has(k){if(!this[_].has(k))return!1;let H=this[_].get(k).value;return!G(this,H)}get(k){return A(this,k,!0)}peek(k){return A(this,k,!1)}pop(){let k=this[v].tail;return k?(de(this,k),k.value):null}del(k){de(this,this[_].get(k))}load(k){this.reset();let H=Date.now();for(let K=k.length-1;K>=0;K--){let re=k[K],I=re.e||0;if(I===0)this.set(re.k,re.v);else{let $=I-H;$>0&&this.set(re.k,re.v,$)}}}prune(){this[_].forEach((k,H)=>A(this,H,!1))}}},76:E=>{E.exports=function(T){T.prototype[Symbol.iterator]=function*(){for(let y=this.head;y;y=y.next)yield y.value}}},190:(E,T,y)=>{function s(c){var h=this;if(h instanceof s||(h=new s),h.tail=null,h.head=null,h.length=0,c&&typeof c.forEach=="function")c.forEach(function(u){h.push(u)});else if(arguments.length>0)for(var a=0,n=arguments.length;a<n;a++)h.push(arguments[a]);return h}function d(c,h,a,n){if(!(this instanceof d))return new d(c,h,a,n);this.list=n,this.value=c,h?(h.next=this,this.prev=h):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}E.exports=s,s.Node=d,s.create=s,s.prototype.removeNode=function(c){if(c.list!==this)throw Error("removing node which does not belong to this list");var h=c.next,a=c.prev;return h&&(h.prev=a),a&&(a.next=h),c===this.head&&(this.head=h),c===this.tail&&(this.tail=a),c.list.length--,c.next=null,c.prev=null,c.list=null,h},s.prototype.unshiftNode=function(c){if(c!==this.head){c.list&&c.list.removeNode(c);var h=this.head;c.list=this,c.next=h,h&&(h.prev=c),this.head=c,this.tail||(this.tail=c),this.length++}},s.prototype.pushNode=function(c){if(c!==this.tail){c.list&&c.list.removeNode(c);var h=this.tail;c.list=this,c.prev=h,h&&(h.next=c),this.tail=c,this.head||(this.head=c),this.length++}},s.prototype.push=function(){for(var c,h=0,a=arguments.length;h<a;h++)c=arguments[h],this.tail=new d(c,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},s.prototype.unshift=function(){for(var c,h=0,a=arguments.length;h<a;h++)c=arguments[h],this.head=new d(c,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},s.prototype.pop=function(){if(this.tail){var c=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,c}},s.prototype.shift=function(){if(this.head){var c=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,c}},s.prototype.forEach=function(c,h){h=h||this;for(var a=this.head,n=0;a!==null;n++)c.call(h,a.value,n,this),a=a.next},s.prototype.forEachReverse=function(c,h){h=h||this;for(var a=this.tail,n=this.length-1;a!==null;n--)c.call(h,a.value,n,this),a=a.prev},s.prototype.get=function(c){for(var h=0,a=this.head;a!==null&&h<c;h++)a=a.next;if(h===c&&a!==null)return a.value},s.prototype.getReverse=function(c){for(var h=0,a=this.tail;a!==null&&h<c;h++)a=a.prev;if(h===c&&a!==null)return a.value},s.prototype.map=function(c,h){h=h||this;for(var a=new s,n=this.head;n!==null;)a.push(c.call(h,n.value,this)),n=n.next;return a},s.prototype.mapReverse=function(c,h){h=h||this;for(var a=new s,n=this.tail;n!==null;)a.push(c.call(h,n.value,this)),n=n.prev;return a},s.prototype.reduce=function(c,h){var a,n=this.head;if(arguments.length>1)a=h;else if(this.head)n=this.head.next,a=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var u=0;n!==null;u++)a=c(a,n.value,u),n=n.next;return a},s.prototype.reduceReverse=function(c,h){var a,n=this.tail;if(arguments.length>1)a=h;else if(this.tail)n=this.tail.prev,a=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var u=this.length-1;n!==null;u--)a=c(a,n.value,u),n=n.prev;return a},s.prototype.toArray=function(){for(var c=Array(this.length),h=0,a=this.head;a!==null;h++)c[h]=a.value,a=a.next;return c},s.prototype.toArrayReverse=function(){for(var c=Array(this.length),h=0,a=this.tail;a!==null;h++)c[h]=a.value,a=a.prev;return c},s.prototype.slice=function(c,h){(h=h||this.length)<0&&(h+=this.length),(c=c||0)<0&&(c+=this.length);var a=new s;if(h<c||h<0)return a;c<0&&(c=0),h>this.length&&(h=this.length);for(var n=0,u=this.head;u!==null&&n<c;n++)u=u.next;for(;u!==null&&n<h;n++,u=u.next)a.push(u.value);return a},s.prototype.sliceReverse=function(c,h){(h=h||this.length)<0&&(h+=this.length),(c=c||0)<0&&(c+=this.length);var a=new s;if(h<c||h<0)return a;c<0&&(c=0),h>this.length&&(h=this.length);for(var n=this.length,u=this.tail;u!==null&&n>h;n--)u=u.prev;for(;u!==null&&n>c;n--,u=u.prev)a.push(u.value);return a},s.prototype.splice=function(c,h){c>this.length&&(c=this.length-1),c<0&&(c=this.length+c);for(var a=0,n=this.head;n!==null&&a<c;a++)n=n.next;for(var u=[],a=0;n&&a<h;a++)u.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var a=2;a<arguments.length;a++)n=function(v,_,w){var O=_===v.head?new d(w,null,_,v):new d(w,_,_.next,v);return O.next===null&&(v.tail=O),O.prev===null&&(v.head=O),v.length++,O}(this,n,arguments[a]);return u},s.prototype.reverse=function(){for(var c=this.head,h=this.tail,a=c;a!==null;a=a.prev){var n=a.prev;a.prev=a.next,a.next=n}return this.head=h,this.tail=c,this};try{y(76)(s)}catch{}}},x={};function M(E){var T=x[E];if(T!==void 0)return T.exports;var y=x[E]={exports:{}},s=!0;try{J[E](y,y.exports,M),s=!1}finally{s&&delete x[E]}return y.exports}M.ab="//";var q=M(806);ne.exports=q})()},oi=(ne,J,x)=>{"use strict";(()=>{var M={339:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ContextAPI=void 0;let c=d(44),h=d(38),a=d(741),n="context",u=new c.NoopContextManager,f=class wr{constructor(){}static getInstance(){return this._instance||(this._instance=new wr),this._instance}setGlobalContextManager(_){return(0,h.registerGlobal)(n,_,a.DiagAPI.instance())}active(){return this._getContextManager().active()}with(_,w,O,...A){return this._getContextManager().with(_,w,O,...A)}bind(_,w){return this._getContextManager().bind(_,w)}_getContextManager(){return(0,h.getGlobal)(n)||u}disable(){this._getContextManager().disable(),(0,h.unregisterGlobal)(n,a.DiagAPI.instance())}};s.ContextAPI=f},741:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DiagAPI=void 0;let c=d(144),h=d(871),a=d(133),n=d(38),u=class Sr{constructor(){function v(w){return function(...O){let A=(0,n.getGlobal)("diag");if(A)return A[w](...O)}}let _=this;_.setLogger=(w,O={logLevel:a.DiagLogLevel.INFO})=>{var A,G,ee;if(w===_){let pe=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return _.error((A=pe.stack)!==null&&A!==void 0?A:pe.message),!1}typeof O=="number"&&(O={logLevel:O});let de=(0,n.getGlobal)("diag"),ve=(0,h.createLogLevelDiagLogger)((G=O.logLevel)!==null&&G!==void 0?G:a.DiagLogLevel.INFO,w);if(de&&!O.suppressOverrideMessage){let pe=(ee=Error().stack)!==null&&ee!==void 0?ee:"<failed to generate stacktrace>";de.warn(`Current logger will be overwritten from ${pe}`),ve.warn(`Current logger will overwrite one already registered from ${pe}`)}return(0,n.registerGlobal)("diag",ve,_,!0)},_.disable=()=>{(0,n.unregisterGlobal)("diag",_)},_.createComponentLogger=w=>new c.DiagComponentLogger(w),_.verbose=v("verbose"),_.debug=v("debug"),_.info=v("info"),_.warn=v("warn"),_.error=v("error")}static instance(){return this._instance||(this._instance=new Sr),this._instance}};s.DiagAPI=u},128:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MetricsAPI=void 0;let c=d(333),h=d(38),a=d(741),n="metrics",u=class xr{constructor(){}static getInstance(){return this._instance||(this._instance=new xr),this._instance}setGlobalMeterProvider(v){return(0,h.registerGlobal)(n,v,a.DiagAPI.instance())}getMeterProvider(){return(0,h.getGlobal)(n)||c.NOOP_METER_PROVIDER}getMeter(v,_,w){return this.getMeterProvider().getMeter(v,_,w)}disable(){(0,h.unregisterGlobal)(n,a.DiagAPI.instance())}};s.MetricsAPI=u},930:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PropagationAPI=void 0;let c=d(38),h=d(600),a=d(625),n=d(377),u=d(701),f=d(741),v="propagation",_=new h.NoopTextMapPropagator,w=class Cr{constructor(){this.createBaggage=u.createBaggage,this.getBaggage=n.getBaggage,this.getActiveBaggage=n.getActiveBaggage,this.setBaggage=n.setBaggage,this.deleteBaggage=n.deleteBaggage}static getInstance(){return this._instance||(this._instance=new Cr),this._instance}setGlobalPropagator(A){return(0,c.registerGlobal)(v,A,f.DiagAPI.instance())}inject(A,G,ee=a.defaultTextMapSetter){return this._getGlobalPropagator().inject(A,G,ee)}extract(A,G,ee=a.defaultTextMapGetter){return this._getGlobalPropagator().extract(A,G,ee)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,c.unregisterGlobal)(v,f.DiagAPI.instance())}_getGlobalPropagator(){return(0,c.getGlobal)(v)||_}};s.PropagationAPI=w},967:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TraceAPI=void 0;let c=d(38),h=d(414),a=d(994),n=d(542),u=d(741),f="trace",v=class Er{constructor(){this._proxyTracerProvider=new h.ProxyTracerProvider,this.wrapSpanContext=a.wrapSpanContext,this.isSpanContextValid=a.isSpanContextValid,this.deleteSpan=n.deleteSpan,this.getSpan=n.getSpan,this.getActiveSpan=n.getActiveSpan,this.getSpanContext=n.getSpanContext,this.setSpan=n.setSpan,this.setSpanContext=n.setSpanContext}static getInstance(){return this._instance||(this._instance=new Er),this._instance}setGlobalTracerProvider(w){let O=(0,c.registerGlobal)(f,this._proxyTracerProvider,u.DiagAPI.instance());return O&&this._proxyTracerProvider.setDelegate(w),O}getTracerProvider(){return(0,c.getGlobal)(f)||this._proxyTracerProvider}getTracer(w,O){return this.getTracerProvider().getTracer(w,O)}disable(){(0,c.unregisterGlobal)(f,u.DiagAPI.instance()),this._proxyTracerProvider=new h.ProxyTracerProvider}};s.TraceAPI=v},377:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.deleteBaggage=s.setBaggage=s.getActiveBaggage=s.getBaggage=void 0;let c=d(339),h=d(421),a=(0,h.createContextKey)("OpenTelemetry Baggage Key");function n(u){return u.getValue(a)||void 0}s.getBaggage=n,s.getActiveBaggage=function(){return n(c.ContextAPI.getInstance().active())},s.setBaggage=function(u,f){return u.setValue(a,f)},s.deleteBaggage=function(u){return u.deleteValue(a)}},496:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaggageImpl=void 0;let d=class qt{constructor(h){this._entries=h?new Map(h):new Map}getEntry(h){let a=this._entries.get(h);if(a)return Object.assign({},a)}getAllEntries(){return Array.from(this._entries.entries()).map(([h,a])=>[h,a])}setEntry(h,a){let n=new qt(this._entries);return n._entries.set(h,a),n}removeEntry(h){let a=new qt(this._entries);return a._entries.delete(h),a}removeEntries(...h){let a=new qt(this._entries);for(let n of h)a._entries.delete(n);return a}clear(){return new qt}};s.BaggageImpl=d},817:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.baggageEntryMetadataSymbol=void 0,s.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},701:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.baggageEntryMetadataFromString=s.createBaggage=void 0;let c=d(741),h=d(496),a=d(817),n=c.DiagAPI.instance();s.createBaggage=function(u={}){return new h.BaggageImpl(new Map(Object.entries(u)))},s.baggageEntryMetadataFromString=function(u){return typeof u!="string"&&(n.error(`Cannot create baggage metadata from unknown type: ${typeof u}`),u=""),{__TYPE__:a.baggageEntryMetadataSymbol,toString:()=>u}}},388:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.context=void 0;let c=d(339);s.context=c.ContextAPI.getInstance()},44:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NoopContextManager=void 0;let c=d(421);s.NoopContextManager=class{active(){return c.ROOT_CONTEXT}with(h,a,n,...u){return a.call(n,...u)}bind(h,a){return a}enable(){return this}disable(){return this}}},421:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ROOT_CONTEXT=s.createContextKey=void 0,s.createContextKey=function(c){return Symbol.for(c)};let d=class lr{constructor(h){let a=this;a._currentContext=h?new Map(h):new Map,a.getValue=n=>a._currentContext.get(n),a.setValue=(n,u)=>{let f=new lr(a._currentContext);return f._currentContext.set(n,u),f},a.deleteValue=n=>{let u=new lr(a._currentContext);return u._currentContext.delete(n),u}}};s.ROOT_CONTEXT=new d},920:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.diag=void 0;let c=d(741);s.diag=c.DiagAPI.instance()},144:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DiagComponentLogger=void 0;let c=d(38);function h(a,n,u){let f=(0,c.getGlobal)("diag");if(f)return u.unshift(n),f[a](...u)}s.DiagComponentLogger=class{constructor(a){this._namespace=a.namespace||"DiagComponentLogger"}debug(...a){return h("debug",this._namespace,a)}error(...a){return h("error",this._namespace,a)}info(...a){return h("info",this._namespace,a)}warn(...a){return h("warn",this._namespace,a)}verbose(...a){return h("verbose",this._namespace,a)}}},689:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DiagConsoleLogger=void 0;let d=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];s.DiagConsoleLogger=class{constructor(){for(let c=0;c<d.length;c++)this[d[c].n]=function(h){return function(...a){if(console){let n=console[h];if(typeof n!="function"&&(n=console.log),typeof n=="function")return n.apply(console,a)}}}(d[c].c)}}},871:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createLogLevelDiagLogger=void 0;let c=d(133);s.createLogLevelDiagLogger=function(h,a){function n(u,f){let v=a[u];return typeof v=="function"&&h>=f?v.bind(a):function(){}}return h<c.DiagLogLevel.NONE?h=c.DiagLogLevel.NONE:h>c.DiagLogLevel.ALL&&(h=c.DiagLogLevel.ALL),a=a||{},{error:n("error",c.DiagLogLevel.ERROR),warn:n("warn",c.DiagLogLevel.WARN),info:n("info",c.DiagLogLevel.INFO),debug:n("debug",c.DiagLogLevel.DEBUG),verbose:n("verbose",c.DiagLogLevel.VERBOSE)}}},133:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DiagLogLevel=void 0,function(d){d[d.NONE=0]="NONE",d[d.ERROR=30]="ERROR",d[d.WARN=50]="WARN",d[d.INFO=60]="INFO",d[d.DEBUG=70]="DEBUG",d[d.VERBOSE=80]="VERBOSE",d[d.ALL=9999]="ALL"}(s.DiagLogLevel||(s.DiagLogLevel={}))},38:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.unregisterGlobal=s.getGlobal=s.registerGlobal=void 0;let c=d(966),h=d(520),a=d(565),n=h.VERSION.split(".")[0],u=Symbol.for(`opentelemetry.js.api.${n}`),f=c._globalThis;s.registerGlobal=function(v,_,w,O=!1){var A;let G=f[u]=(A=f[u])!==null&&A!==void 0?A:{version:h.VERSION};if(!O&&G[v]){let ee=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${v}`);return w.error(ee.stack||ee.message),!1}if(G.version!==h.VERSION){let ee=Error(`@opentelemetry/api: Registration of version v${G.version} for ${v} does not match previously registered API v${h.VERSION}`);return w.error(ee.stack||ee.message),!1}return G[v]=_,w.debug(`@opentelemetry/api: Registered a global for ${v} v${h.VERSION}.`),!0},s.getGlobal=function(v){var _,w;let O=(_=f[u])===null||_===void 0?void 0:_.version;if(O&&(0,a.isCompatible)(O))return(w=f[u])===null||w===void 0?void 0:w[v]},s.unregisterGlobal=function(v,_){_.debug(`@opentelemetry/api: Unregistering a global for ${v} v${h.VERSION}.`);let w=f[u];w&&delete w[v]}},565:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isCompatible=s._makeCompatibilityCheck=void 0;let c=d(520),h=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function a(n){let u=new Set([n]),f=new Set,v=n.match(h);if(!v)return()=>!1;let _={major:+v[1],minor:+v[2],patch:+v[3],prerelease:v[4]};if(_.prerelease!=null)return function(O){return O===n};function w(O){return f.add(O),!1}return function(O){if(u.has(O))return!0;if(f.has(O))return!1;let A=O.match(h);if(!A)return w(O);let G={major:+A[1],minor:+A[2],patch:+A[3],prerelease:A[4]};return G.prerelease!=null||_.major!==G.major?w(O):_.major===0?_.minor===G.minor&&_.patch<=G.patch?(u.add(O),!0):w(O):_.minor<=G.minor?(u.add(O),!0):w(O)}}s._makeCompatibilityCheck=a,s.isCompatible=a(c.VERSION)},934:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.metrics=void 0;let c=d(128);s.metrics=c.MetricsAPI.getInstance()},28:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ValueType=void 0,function(d){d[d.INT=0]="INT",d[d.DOUBLE=1]="DOUBLE"}(s.ValueType||(s.ValueType={}))},962:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createNoopMeter=s.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=s.NOOP_OBSERVABLE_GAUGE_METRIC=s.NOOP_OBSERVABLE_COUNTER_METRIC=s.NOOP_UP_DOWN_COUNTER_METRIC=s.NOOP_HISTOGRAM_METRIC=s.NOOP_COUNTER_METRIC=s.NOOP_METER=s.NoopObservableUpDownCounterMetric=s.NoopObservableGaugeMetric=s.NoopObservableCounterMetric=s.NoopObservableMetric=s.NoopHistogramMetric=s.NoopUpDownCounterMetric=s.NoopCounterMetric=s.NoopMetric=s.NoopMeter=void 0;let d=class{constructor(){}createHistogram(O,A){return s.NOOP_HISTOGRAM_METRIC}createCounter(O,A){return s.NOOP_COUNTER_METRIC}createUpDownCounter(O,A){return s.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(O,A){return s.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(O,A){return s.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(O,A){return s.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(O,A){}removeBatchObservableCallback(O){}};s.NoopMeter=d;let c=class{};s.NoopMetric=c;let h=class extends c{add(O,A){}};s.NoopCounterMetric=h;let a=class extends c{add(O,A){}};s.NoopUpDownCounterMetric=a;let n=class extends c{record(O,A){}};s.NoopHistogramMetric=n;let u=class{addCallback(O){}removeCallback(O){}};s.NoopObservableMetric=u;let f=class extends u{};s.NoopObservableCounterMetric=f;let v=class extends u{};s.NoopObservableGaugeMetric=v;let _=class extends u{};s.NoopObservableUpDownCounterMetric=_,s.NOOP_METER=new d,s.NOOP_COUNTER_METRIC=new h,s.NOOP_HISTOGRAM_METRIC=new n,s.NOOP_UP_DOWN_COUNTER_METRIC=new a,s.NOOP_OBSERVABLE_COUNTER_METRIC=new f,s.NOOP_OBSERVABLE_GAUGE_METRIC=new v,s.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new _,s.createNoopMeter=function(){return s.NOOP_METER}},333:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NOOP_METER_PROVIDER=s.NoopMeterProvider=void 0;let c=d(962),h=class{getMeter(n,u,f){return c.NOOP_METER}};s.NoopMeterProvider=h,s.NOOP_METER_PROVIDER=new h},966:function(y,s,d){var c=this&&this.__createBinding||(Object.create?function(a,n,u,f){f===void 0&&(f=u),Object.defineProperty(a,f,{enumerable:!0,get:function(){return n[u]}})}:function(a,n,u,f){f===void 0&&(f=u),a[f]=n[u]}),h=this&&this.__exportStar||function(a,n){for(var u in a)u==="default"||Object.prototype.hasOwnProperty.call(n,u)||c(n,a,u)};Object.defineProperty(s,"__esModule",{value:!0}),h(d(652),s)},385:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s._globalThis=void 0,s._globalThis=typeof globalThis=="object"?globalThis:x.g},652:function(y,s,d){var c=this&&this.__createBinding||(Object.create?function(a,n,u,f){f===void 0&&(f=u),Object.defineProperty(a,f,{enumerable:!0,get:function(){return n[u]}})}:function(a,n,u,f){f===void 0&&(f=u),a[f]=n[u]}),h=this&&this.__exportStar||function(a,n){for(var u in a)u==="default"||Object.prototype.hasOwnProperty.call(n,u)||c(n,a,u)};Object.defineProperty(s,"__esModule",{value:!0}),h(d(385),s)},251:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.propagation=void 0;let c=d(930);s.propagation=c.PropagationAPI.getInstance()},600:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTextMapPropagator=void 0,s.NoopTextMapPropagator=class{inject(d,c){}extract(d,c){return d}fields(){return[]}}},625:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.defaultTextMapSetter=s.defaultTextMapGetter=void 0,s.defaultTextMapGetter={get(d,c){if(d!=null)return d[c]},keys:d=>d==null?[]:Object.keys(d)},s.defaultTextMapSetter={set(d,c,h){d!=null&&(d[c]=h)}}},978:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.trace=void 0;let c=d(967);s.trace=c.TraceAPI.getInstance()},76:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NonRecordingSpan=void 0;let c=d(304);s.NonRecordingSpan=class{constructor(h=c.INVALID_SPAN_CONTEXT){this._spanContext=h}spanContext(){return this._spanContext}setAttribute(h,a){return this}setAttributes(h){return this}addEvent(h,a){return this}setStatus(h){return this}updateName(h){return this}end(h){}isRecording(){return!1}recordException(h,a){}}},527:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTracer=void 0;let c=d(339),h=d(542),a=d(76),n=d(994),u=c.ContextAPI.getInstance();s.NoopTracer=class{startSpan(f,v,_=u.active()){if(!!v?.root)return new a.NonRecordingSpan;let O=_&&(0,h.getSpanContext)(_);return typeof O=="object"&&typeof O.spanId=="string"&&typeof O.traceId=="string"&&typeof O.traceFlags=="number"&&(0,n.isSpanContextValid)(O)?new a.NonRecordingSpan(O):new a.NonRecordingSpan}startActiveSpan(f,v,_,w){let O,A,G;if(arguments.length<2)return;arguments.length==2?G=v:arguments.length==3?(O=v,G=_):(O=v,A=_,G=w);let ee=A??u.active(),de=this.startSpan(f,O,ee),ve=(0,h.setSpan)(ee,de);return u.with(ve,G,void 0,de)}}},228:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTracerProvider=void 0;let c=d(527);s.NoopTracerProvider=class{getTracer(h,a,n){return new c.NoopTracer}}},387:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ProxyTracer=void 0;let c=d(527),h=new c.NoopTracer;s.ProxyTracer=class{constructor(a,n,u,f){this._provider=a,this.name=n,this.version=u,this.options=f}startSpan(a,n,u){return this._getTracer().startSpan(a,n,u)}startActiveSpan(a,n,u,f){let v=this._getTracer();return Reflect.apply(v.startActiveSpan,v,arguments)}_getTracer(){if(this._delegate)return this._delegate;let a=this._provider.getDelegateTracer(this.name,this.version,this.options);return a?(this._delegate=a,this._delegate):h}}},414:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ProxyTracerProvider=void 0;let c=d(387),h=d(228),a=new h.NoopTracerProvider;s.ProxyTracerProvider=class{getTracer(n,u,f){var v;return(v=this.getDelegateTracer(n,u,f))!==null&&v!==void 0?v:new c.ProxyTracer(this,n,u,f)}getDelegate(){var n;return(n=this._delegate)!==null&&n!==void 0?n:a}setDelegate(n){this._delegate=n}getDelegateTracer(n,u,f){var v;return(v=this._delegate)===null||v===void 0?void 0:v.getTracer(n,u,f)}}},505:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SamplingDecision=void 0,function(d){d[d.NOT_RECORD=0]="NOT_RECORD",d[d.RECORD=1]="RECORD",d[d.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(s.SamplingDecision||(s.SamplingDecision={}))},542:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getSpanContext=s.setSpanContext=s.deleteSpan=s.setSpan=s.getActiveSpan=s.getSpan=void 0;let c=d(421),h=d(76),a=d(339),n=(0,c.createContextKey)("OpenTelemetry Context Key SPAN");function u(v){return v.getValue(n)||void 0}function f(v,_){return v.setValue(n,_)}s.getSpan=u,s.getActiveSpan=function(){return u(a.ContextAPI.getInstance().active())},s.setSpan=f,s.deleteSpan=function(v){return v.deleteValue(n)},s.setSpanContext=function(v,_){return f(v,new h.NonRecordingSpan(_))},s.getSpanContext=function(v){var _;return(_=u(v))===null||_===void 0?void 0:_.spanContext()}},430:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TraceStateImpl=void 0;let c=d(450),h=class Tr{constructor(n){this._internalState=new Map,n&&this._parse(n)}set(n,u){let f=this._clone();return f._internalState.has(n)&&f._internalState.delete(n),f._internalState.set(n,u),f}unset(n){let u=this._clone();return u._internalState.delete(n),u}get(n){return this._internalState.get(n)}serialize(){return this._keys().reduce((n,u)=>(n.push(u+"="+this.get(u)),n),[]).join(",")}_parse(n){!(n.length>512)&&(this._internalState=n.split(",").reverse().reduce((u,f)=>{let v=f.trim(),_=v.indexOf("=");if(_!==-1){let w=v.slice(0,_),O=v.slice(_+1,f.length);(0,c.validateKey)(w)&&(0,c.validateValue)(O)&&u.set(w,O)}return u},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let n=new Tr;return n._internalState=new Map(this._internalState),n}};s.TraceStateImpl=h},450:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.validateValue=s.validateKey=void 0;let d="[_0-9a-z-*/]",c=`[a-z]${d}{0,255}`,h=`[a-z0-9]${d}{0,240}@[a-z]${d}{0,13}`,a=RegExp(`^(?:${c}|${h})$`),n=/^[ -~]{0,255}[!-~]$/,u=/,|=/;s.validateKey=function(f){return a.test(f)},s.validateValue=function(f){return n.test(f)&&!u.test(f)}},757:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createTraceState=void 0;let c=d(430);s.createTraceState=function(h){return new c.TraceStateImpl(h)}},304:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=void 0;let c=d(762);s.INVALID_SPANID="0000000000000000",s.INVALID_TRACEID="00000000000000000000000000000000",s.INVALID_SPAN_CONTEXT={traceId:s.INVALID_TRACEID,spanId:s.INVALID_SPANID,traceFlags:c.TraceFlags.NONE}},902:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SpanKind=void 0,function(d){d[d.INTERNAL=0]="INTERNAL",d[d.SERVER=1]="SERVER",d[d.CLIENT=2]="CLIENT",d[d.PRODUCER=3]="PRODUCER",d[d.CONSUMER=4]="CONSUMER"}(s.SpanKind||(s.SpanKind={}))},994:(y,s,d)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.wrapSpanContext=s.isSpanContextValid=s.isValidSpanId=s.isValidTraceId=void 0;let c=d(304),h=d(76),a=/^([0-9a-f]{32})$/i,n=/^[0-9a-f]{16}$/i;function u(v){return a.test(v)&&v!==c.INVALID_TRACEID}function f(v){return n.test(v)&&v!==c.INVALID_SPANID}s.isValidTraceId=u,s.isValidSpanId=f,s.isSpanContextValid=function(v){return u(v.traceId)&&f(v.spanId)},s.wrapSpanContext=function(v){return new h.NonRecordingSpan(v)}},832:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SpanStatusCode=void 0,function(d){d[d.UNSET=0]="UNSET",d[d.OK=1]="OK",d[d.ERROR=2]="ERROR"}(s.SpanStatusCode||(s.SpanStatusCode={}))},762:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TraceFlags=void 0,function(d){d[d.NONE=0]="NONE",d[d.SAMPLED=1]="SAMPLED"}(s.TraceFlags||(s.TraceFlags={}))},520:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.VERSION=void 0,s.VERSION="1.4.1"}},q={};function E(y){var s=q[y];if(s!==void 0)return s.exports;var d=q[y]={exports:{}},c=!0;try{M[y].call(d.exports,d,d.exports,E),c=!1}finally{c&&delete q[y]}return d.exports}E.ab="//";var T={};(()=>{Object.defineProperty(T,"__esModule",{value:!0}),T.trace=T.propagation=T.metrics=T.diag=T.context=T.INVALID_SPAN_CONTEXT=T.INVALID_TRACEID=T.INVALID_SPANID=T.isValidSpanId=T.isValidTraceId=T.isSpanContextValid=T.createTraceState=T.TraceFlags=T.SpanStatusCode=T.SpanKind=T.SamplingDecision=T.ProxyTracerProvider=T.ProxyTracer=T.defaultTextMapSetter=T.defaultTextMapGetter=T.ValueType=T.createNoopMeter=T.DiagLogLevel=T.DiagConsoleLogger=T.ROOT_CONTEXT=T.createContextKey=T.baggageEntryMetadataFromString=void 0;var y=E(701);Object.defineProperty(T,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return y.baggageEntryMetadataFromString}});var s=E(421);Object.defineProperty(T,"createContextKey",{enumerable:!0,get:function(){return s.createContextKey}}),Object.defineProperty(T,"ROOT_CONTEXT",{enumerable:!0,get:function(){return s.ROOT_CONTEXT}});var d=E(689);Object.defineProperty(T,"DiagConsoleLogger",{enumerable:!0,get:function(){return d.DiagConsoleLogger}});var c=E(133);Object.defineProperty(T,"DiagLogLevel",{enumerable:!0,get:function(){return c.DiagLogLevel}});var h=E(962);Object.defineProperty(T,"createNoopMeter",{enumerable:!0,get:function(){return h.createNoopMeter}});var a=E(28);Object.defineProperty(T,"ValueType",{enumerable:!0,get:function(){return a.ValueType}});var n=E(625);Object.defineProperty(T,"defaultTextMapGetter",{enumerable:!0,get:function(){return n.defaultTextMapGetter}}),Object.defineProperty(T,"defaultTextMapSetter",{enumerable:!0,get:function(){return n.defaultTextMapSetter}});var u=E(387);Object.defineProperty(T,"ProxyTracer",{enumerable:!0,get:function(){return u.ProxyTracer}});var f=E(414);Object.defineProperty(T,"ProxyTracerProvider",{enumerable:!0,get:function(){return f.ProxyTracerProvider}});var v=E(505);Object.defineProperty(T,"SamplingDecision",{enumerable:!0,get:function(){return v.SamplingDecision}});var _=E(902);Object.defineProperty(T,"SpanKind",{enumerable:!0,get:function(){return _.SpanKind}});var w=E(832);Object.defineProperty(T,"SpanStatusCode",{enumerable:!0,get:function(){return w.SpanStatusCode}});var O=E(762);Object.defineProperty(T,"TraceFlags",{enumerable:!0,get:function(){return O.TraceFlags}});var A=E(757);Object.defineProperty(T,"createTraceState",{enumerable:!0,get:function(){return A.createTraceState}});var G=E(994);Object.defineProperty(T,"isSpanContextValid",{enumerable:!0,get:function(){return G.isSpanContextValid}}),Object.defineProperty(T,"isValidTraceId",{enumerable:!0,get:function(){return G.isValidTraceId}}),Object.defineProperty(T,"isValidSpanId",{enumerable:!0,get:function(){return G.isValidSpanId}});var ee=E(304);Object.defineProperty(T,"INVALID_SPANID",{enumerable:!0,get:function(){return ee.INVALID_SPANID}}),Object.defineProperty(T,"INVALID_TRACEID",{enumerable:!0,get:function(){return ee.INVALID_TRACEID}}),Object.defineProperty(T,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return ee.INVALID_SPAN_CONTEXT}});let de=E(388);Object.defineProperty(T,"context",{enumerable:!0,get:function(){return de.context}});let ve=E(920);Object.defineProperty(T,"diag",{enumerable:!0,get:function(){return ve.diag}});let pe=E(934);Object.defineProperty(T,"metrics",{enumerable:!0,get:function(){return pe.metrics}});let k=E(251);Object.defineProperty(T,"propagation",{enumerable:!0,get:function(){return k.propagation}});let H=E(978);Object.defineProperty(T,"trace",{enumerable:!0,get:function(){return H.trace}}),T.default={context:de.context,diag:ve.diag,metrics:pe.metrics,propagation:k.propagation,trace:H.trace}})(),ne.exports=T})()},yi=ne=>{"use strict";var J=Object.defineProperty,x=Object.getOwnPropertyDescriptor,M=Object.getOwnPropertyNames,q=Object.prototype.hasOwnProperty,E={};function T(n){var u;let f=["path"in n&&n.path&&`Path=${n.path}`,"expires"in n&&(n.expires||n.expires===0)&&`Expires=${(typeof n.expires=="number"?new Date(n.expires):n.expires).toUTCString()}`,"maxAge"in n&&typeof n.maxAge=="number"&&`Max-Age=${n.maxAge}`,"domain"in n&&n.domain&&`Domain=${n.domain}`,"secure"in n&&n.secure&&"Secure","httpOnly"in n&&n.httpOnly&&"HttpOnly","sameSite"in n&&n.sameSite&&`SameSite=${n.sameSite}`].filter(Boolean);return`${n.name}=${encodeURIComponent((u=n.value)!=null?u:"")}; ${f.join("; ")}`}function y(n){let u=new Map;for(let f of n.split(/; */)){if(!f)continue;let v=f.indexOf("=");if(v===-1){u.set(f,"true");continue}let[_,w]=[f.slice(0,v),f.slice(v+1)];try{u.set(_,decodeURIComponent(w??"true"))}catch{}}return u}function s(n){var u;if(!n)return;let[[f,v],..._]=y(n),{domain:w,expires:O,httponly:A,maxage:G,path:ee,samesite:de,secure:ve}=Object.fromEntries(_.map(([k,H])=>[k.toLowerCase(),H])),pe={name:f,value:decodeURIComponent(v),domain:w,...O&&{expires:new Date(O)},...A&&{httpOnly:!0},...typeof G=="string"&&{maxAge:Number(G)},path:ee,...de&&{sameSite:d.includes(u=(u=de).toLowerCase())?u:void 0},...ve&&{secure:!0}};return function(k){let H={};for(let K in k)k[K]&&(H[K]=k[K]);return H}(pe)}((n,u)=>{for(var f in u)J(n,f,{get:u[f],enumerable:!0})})(E,{RequestCookies:()=>h,ResponseCookies:()=>a,parseCookie:()=>y,parseSetCookie:()=>s,splitCookiesString:()=>c,stringifyCookie:()=>T}),ne.exports=((n,u,f,v)=>{if(u&&typeof u=="object"||typeof u=="function")for(let _ of M(u))q.call(n,_)||_===void 0||J(n,_,{get:()=>u[_],enumerable:!(v=x(u,_))||v.enumerable});return n})(J({},"__esModule",{value:!0}),E);var d=["strict","lax","none"];function c(n){if(!n)return[];var u,f,v,_,w,O=[],A=0;function G(){for(;A<n.length&&/\s/.test(n.charAt(A));)A+=1;return A<n.length}for(;A<n.length;){for(u=A,w=!1;G();)if((f=n.charAt(A))===","){for(v=A,A+=1,G(),_=A;A<n.length&&(f=n.charAt(A))!=="="&&f!==";"&&f!==",";)A+=1;A<n.length&&n.charAt(A)==="="?(w=!0,A=_,O.push(n.substring(u,v)),u=A):A=v+1}else A+=1;(!w||A>=n.length)&&O.push(n.substring(u,n.length))}return O}var h=class{constructor(n){this._parsed=new Map,this._headers=n;let u=n.get("cookie");if(u){let f=y(u);for(let[v,_]of f)this._parsed.set(v,{name:v,value:_})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...n){let u=typeof n[0]=="string"?n[0]:n[0].name;return this._parsed.get(u)}getAll(...n){var u;let f=Array.from(this._parsed);if(!n.length)return f.map(([_,w])=>w);let v=typeof n[0]=="string"?n[0]:(u=n[0])==null?void 0:u.name;return f.filter(([_])=>_===v).map(([_,w])=>w)}has(n){return this._parsed.has(n)}set(...n){let[u,f]=n.length===1?[n[0].name,n[0].value]:n,v=this._parsed;return v.set(u,{name:u,value:f}),this._headers.set("cookie",Array.from(v).map(([_,w])=>T(w)).join("; ")),this}delete(n){let u=this._parsed,f=Array.isArray(n)?n.map(v=>u.delete(v)):u.delete(n);return this._headers.set("cookie",Array.from(u).map(([v,_])=>T(_)).join("; ")),f}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(n=>`${n.name}=${encodeURIComponent(n.value)}`).join("; ")}},a=class{constructor(n){var u;this._parsed=new Map,this._headers=n;let f=(u=n.getSetCookie)==null?void 0:u.call(n);n.get("set-cookie");let v=Array.isArray(f)?f:c(f);for(let _ of v){let w=s(_);w&&this._parsed.set(w.name,w)}}get(...n){let u=typeof n[0]=="string"?n[0]:n[0].name;return this._parsed.get(u)}getAll(...n){var u;let f=Array.from(this._parsed.values());if(!n.length)return f;let v=typeof n[0]=="string"?n[0]:(u=n[0])==null?void 0:u.name;return f.filter(_=>_.name===v)}has(n){return this._parsed.has(n)}set(...n){let[u,f,v]=n.length===1?[n[0].name,n[0].value,n[0]]:n,_=this._parsed;return _.set(u,function(w={name:"",value:""}){return typeof w.expires=="number"&&(w.expires=new Date(w.expires)),w.maxAge&&(w.expires=new Date(Date.now()+1e3*w.maxAge)),(w.path===null||w.path===void 0)&&(w.path="/"),w}({name:u,value:f,...v})),function(w,O){for(let[,A]of(O.delete("set-cookie"),w)){let G=T(A);O.append("set-cookie",G)}}(_,this._headers),this}delete(...n){let[u,f,v]=typeof n[0]=="string"?[n[0]]:[n[0].name,n[0].path,n[0].domain];return this.set({name:u,path:f,domain:v,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(T).join("; ")}}},bi=ne=>{"use strict";var J=function(){if(typeof self=="object"&&self)return self;throw Error("Unable to resolve global `this`")};ne.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return J()}try{return __global__||J()}finally{delete Object.prototype.__global__}}()},_i=(ne,J,x)=>{"use strict";var M=function(){if(typeof self<"u")return self;if(x.g!==void 0)return x.g;throw Error("unable to locate global object")}();ne.exports=J=M.fetch,M.fetch&&(J.default=M.fetch.bind(M)),J.Headers=M.Headers,J.Request=M.Request,J.Response=M.Response},wi=(ne,J,x)=>{"use strict";var M,q=Object.defineProperty,E=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,y=Object.prototype.hasOwnProperty,s={};((I,$)=>{for(var Z in $)q(I,Z,{get:$[Z],enumerable:!0})})(s,{createBrowserSupabaseClient:()=>H,createClientComponentClient:()=>c,createMiddlewareClient:()=>O,createMiddlewareSupabaseClient:()=>re,createPagesBrowserClient:()=>h,createPagesServerClient:()=>f,createRouteHandlerClient:()=>pe,createServerActionClient:()=>k,createServerComponentClient:()=>ee,createServerSupabaseClient:()=>K}),ne.exports=((I,$,Z,X)=>{if($&&typeof $=="object"||typeof $=="function")for(let le of T($))y.call(I,le)||le===void 0||q(I,le,{get:()=>$[le],enumerable:!(X=E($,le))||X.enumerable});return I})(q({},"__esModule",{value:!0}),s);var d=x(7807);function c({supabaseUrl:I="https://oqetnmealraxzvlallio.supabase.co",supabaseKey:$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZXRubWVhbHJheHp2bGFsbGlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTY5NDQ0NjAsImV4cCI6MjAxMjUyMDQ2MH0.1om7AKUt0r4O2eNzrf3AMdc49VsLSlu5u2K2Qx7MTyc",options:Z,cookieOptions:X,isSingleton:le=!0}={}){if(!I||!$)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");let Me=()=>{var tt;return(0,d.createSupabaseClient)(I,$,{...Z,global:{...Z?.global,headers:{...(tt=Z?.global)==null?void 0:tt.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.8.1"}},auth:{storageKey:X?.name,storage:new d.BrowserCookieAuthStorageAdapter(X)}})};return le?M??Me():Me()}var h=c,a=x(7807),n=x(2683),u=class extends a.CookieAuthStorageAdapter{constructor(I,$){super($),this.context=I}getCookie(I){var $;return(0,n.splitCookiesString)((($=this.context.res.getHeader("set-cookie"))==null?void 0:$.toString())??"").map(le=>(0,a.parseCookies)(le)[I]).find(le=>!!le)??this.context.req.cookies[I]}setCookie(I,$){this._setCookie(I,$)}deleteCookie(I){this._setCookie(I,"",{maxAge:0})}_setCookie(I,$,Z){var X;let le=(0,n.splitCookiesString)(((X=this.context.res.getHeader("set-cookie"))==null?void 0:X.toString())??"").filter(tt=>!(I in(0,a.parseCookies)(tt))),Me=(0,a.serializeCookie)(I,$,{...this.cookieOptions,...Z,httpOnly:!1});this.context.res.setHeader("set-cookie",[...le,Me])}};function f(I,{supabaseUrl:$="https://oqetnmealraxzvlallio.supabase.co",supabaseKey:Z="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZXRubWVhbHJheHp2bGFsbGlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTY5NDQ0NjAsImV4cCI6MjAxMjUyMDQ2MH0.1om7AKUt0r4O2eNzrf3AMdc49VsLSlu5u2K2Qx7MTyc",options:X,cookieOptions:le}={}){var Me;if(!$||!Z)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,a.createSupabaseClient)($,Z,{...X,global:{...X?.global,headers:{...(Me=X?.global)==null?void 0:Me.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.8.1"}},auth:{storageKey:le?.name,storage:new u(I,le)}})}var v=x(7807),_=x(2683),w=class extends v.CookieAuthStorageAdapter{constructor(I,$){super($),this.context=I}getCookie(I){var $;let Z=(0,_.splitCookiesString)((($=this.context.res.headers.get("set-cookie"))==null?void 0:$.toString())??"").map(le=>(0,v.parseCookies)(le)[I]).find(le=>!!le);return Z||(0,v.parseCookies)(this.context.req.headers.get("cookie")??"")[I]}setCookie(I,$){this._setCookie(I,$)}deleteCookie(I){this._setCookie(I,"",{maxAge:0})}_setCookie(I,$,Z){let X=(0,v.serializeCookie)(I,$,{...this.cookieOptions,...Z,httpOnly:!1});this.context.res.headers&&this.context.res.headers.append("set-cookie",X)}};function O(I,{supabaseUrl:$="https://oqetnmealraxzvlallio.supabase.co",supabaseKey:Z="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZXRubWVhbHJheHp2bGFsbGlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTY5NDQ0NjAsImV4cCI6MjAxMjUyMDQ2MH0.1om7AKUt0r4O2eNzrf3AMdc49VsLSlu5u2K2Qx7MTyc",options:X,cookieOptions:le}={}){var Me;if(!$||!Z)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,v.createSupabaseClient)($,Z,{...X,global:{...X?.global,headers:{...(Me=X?.global)==null?void 0:Me.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.8.1"}},auth:{storageKey:le?.name,storage:new w(I,le)}})}var A=x(7807),G=class extends A.CookieAuthStorageAdapter{constructor(I,$){super($),this.context=I}getCookie(I){var $;return($=this.context.cookies().get(I))==null?void 0:$.value}setCookie(I,$){}deleteCookie(I){}};function ee(I,{supabaseUrl:$="https://oqetnmealraxzvlallio.supabase.co",supabaseKey:Z="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZXRubWVhbHJheHp2bGFsbGlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTY5NDQ0NjAsImV4cCI6MjAxMjUyMDQ2MH0.1om7AKUt0r4O2eNzrf3AMdc49VsLSlu5u2K2Qx7MTyc",options:X,cookieOptions:le}={}){var Me;if(!$||!Z)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,A.createSupabaseClient)($,Z,{...X,global:{...X?.global,headers:{...(Me=X?.global)==null?void 0:Me.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.8.1"}},auth:{storageKey:le?.name,storage:new G(I,le)}})}var de=x(7807),ve=class extends de.CookieAuthStorageAdapter{constructor(I,$){super($),this.context=I}getCookie(I){var $;return($=this.context.cookies().get(I))==null?void 0:$.value}setCookie(I,$){this.context.cookies().set(I,$,this.cookieOptions)}deleteCookie(I){this.context.cookies().set(I,"",{maxAge:0})}};function pe(I,{supabaseUrl:$="https://oqetnmealraxzvlallio.supabase.co",supabaseKey:Z="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZXRubWVhbHJheHp2bGFsbGlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTY5NDQ0NjAsImV4cCI6MjAxMjUyMDQ2MH0.1om7AKUt0r4O2eNzrf3AMdc49VsLSlu5u2K2Qx7MTyc",options:X,cookieOptions:le}={}){var Me;if(!$||!Z)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,de.createSupabaseClient)($,Z,{...X,global:{...X?.global,headers:{...(Me=X?.global)==null?void 0:Me.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.8.1"}},auth:{storageKey:le?.name,storage:new ve(I,le)}})}var k=pe;function H({supabaseUrl:I="https://oqetnmealraxzvlallio.supabase.co",supabaseKey:$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZXRubWVhbHJheHp2bGFsbGlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTY5NDQ0NjAsImV4cCI6MjAxMjUyMDQ2MH0.1om7AKUt0r4O2eNzrf3AMdc49VsLSlu5u2K2Qx7MTyc",options:Z,cookieOptions:X}={}){return console.warn("Please utilize the `createPagesBrowserClient` function instead of the deprecated `createBrowserSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages"),h({supabaseUrl:I,supabaseKey:$,options:Z,cookieOptions:X})}function K(I,{supabaseUrl:$="https://oqetnmealraxzvlallio.supabase.co",supabaseKey:Z="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZXRubWVhbHJheHp2bGFsbGlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTY5NDQ0NjAsImV4cCI6MjAxMjUyMDQ2MH0.1om7AKUt0r4O2eNzrf3AMdc49VsLSlu5u2K2Qx7MTyc",options:X,cookieOptions:le}={}){return console.warn("Please utilize the `createPagesServerClient` function instead of the deprecated `createServerSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages"),f(I,{supabaseUrl:$,supabaseKey:Z,options:X,cookieOptions:le})}function re(I,{supabaseUrl:$="https://oqetnmealraxzvlallio.supabase.co",supabaseKey:Z="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZXRubWVhbHJheHp2bGFsbGlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTY5NDQ0NjAsImV4cCI6MjAxMjUyMDQ2MH0.1om7AKUt0r4O2eNzrf3AMdc49VsLSlu5u2K2Qx7MTyc",options:X,cookieOptions:le}={}){return console.warn("Please utilize the `createMiddlewareClient` function instead of the deprecated `createMiddlewareSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs#middleware"),O(I,{supabaseUrl:$,supabaseKey:Z,options:X,cookieOptions:le})}};export{Ls as __chunk_1210,Ts as __chunk_1214,yi as __chunk_1690,ys as __chunk_2094,ti as __chunk_2533,_s as __chunk_2683,ni as __chunk_2935,xs as __chunk_3329,bs as __chunk_3545,ks as __chunk_3576,Xs as __chunk_3747,Ps as __chunk_3764,Os as __chunk_3979,Is as __chunk_4604,Ws as __chunk_4649,Cs as __chunk_5288,Ds as __chunk_5927,Ms as __chunk_6256,oi as __chunk_6581,_i as __chunk_6749,bi as __chunk_6756,js as __chunk_7664,$r as __chunk_7807,si as __chunk_7842,wi as __chunk_8263,ei as __chunk_8333,Ss as __chunk_8752,Dr as __chunk_9046,Es as __chunk_9209,ws as __chunk_9756};
/*! Bundled license information:

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
