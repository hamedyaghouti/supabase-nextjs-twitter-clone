(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8114:function(t,e,n){Promise.resolve().then(n.bind(n,8219))},8219:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return AuthButtonClient}});var s=n(7437),i=n(3082),u=n(4033),a=n(2265);let getUserInfo=async()=>{let t=await fetch("https://supabase-nextjs-twitter-clone.pages.dev/api/userinfo"),e=await t.json();return e};function UserData(){let[t,e]=a.useState(!1),[n,i]=a.useState(null);return a.useEffect(()=>{e(!0),getUserInfo().then(t=>{e(!1),i(t)})},[]),a.useEffect(()=>{console.log("userinfo =====> ",n)},[n]),(0,s.jsx)("div",{children:"User Info"})}function AuthButtonClient(t){let{session:e}=t,n=(0,i.createClientComponentClient)(),a=(0,u.useRouter)(),handleSignIn=async()=>{await n.auth.signInWithOAuth({provider:"github",options:{redirectTo:"https://supabase-nextjs-twitter-clone.pages.dev/api/auth/callback"}})},handleSignOut=async()=>{await n.auth.signOut(),a.refresh()};return e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:handleSignOut,children:"Logout"}),(0,s.jsx)(UserData,{})]}):(0,s.jsx)("button",{onClick:handleSignIn,children:"Login"})}}},function(t){t.O(0,[67,971,12,744],function(){return t(t.s=8114)}),_N_E=t.O()}]);